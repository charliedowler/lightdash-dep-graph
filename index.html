<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Lightdash Backend — Dependency Graph</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, system-ui, sans-serif; background: #0d1117; color: #c9d1d9; overflow: hidden; }

#controls {
  position: fixed; top: 0; left: 0; right: 0; z-index: 10;
  background: #161b22ee; backdrop-filter: blur(8px);
  border-bottom: 1px solid #21262d;
  padding: 10px 16px; display: flex; gap: 8px; align-items: center; flex-wrap: wrap;
}
#controls input[type=text] {
  background: #0d1117; border: 1px solid #30363d; color: #c9d1d9;
  padding: 6px 12px; border-radius: 6px; font-size: 13px; width: 220px;
}
#controls input:focus { outline: none; border-color: #58a6ff; }
.btn {
  background: #21262d; border: 1px solid #30363d; color: #8b949e;
  padding: 5px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;
  transition: all 0.15s;
}
.btn:hover { background: #30363d; color: #c9d1d9; }
.btn.active { border-color: #58a6ff; color: #58a6ff; background: #1f6feb22; }
.sep { width: 1px; height: 20px; background: #30363d; }
#legend {
  position: fixed; bottom: 16px; right: 16px; z-index: 10;
  background: #161b22dd; backdrop-filter: blur(8px);
  border: 1px solid #21262d; border-radius: 8px;
  padding: 12px 16px; display: flex; flex-direction: column; gap: 6px;
}
.stat { font-size: 12px; color: #8b949e; }
.stat b { font-weight: 600; }
.stat-c b { color: #79c0ff; }
.stat-s b { color: #7ee787; }
.stat-m b { color: #ffa657; }
.stat-r b { color: #d2a8ff; }
.stat-k b { color: #f778ba; }

#tooltip {
  position: fixed; background: #1c2128; border: 1px solid #30363d;
  border-radius: 8px; padding: 12px 16px; font-size: 12px;
  pointer-events: none; display: none; z-index: 20; max-width: 380px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.5); line-height: 1.5;
}
#tooltip h3 { font-size: 14px; margin-bottom: 4px; }
#tooltip .t-section { color: #8b949e; margin-top: 6px; font-size: 11px; text-transform: uppercase; font-weight: 600; }
#tooltip .t-item { color: #c9d1d9; padding-left: 10px; }

svg { width: 100vw; height: 100vh; }

.link { stroke-opacity: 0.12; stroke-width: 1; }
.link-uses_service { stroke: #79c0ff; }
.link-router_uses_service { stroke: #d2a8ff; }
.link-injects_model { stroke: #ffa657; }
.link-injects_client { stroke: #f778ba; }
.link-injects_service { stroke: #7ee787; stroke-dasharray: 4,3; }
.link.highlighted { stroke-opacity: 0.85; stroke-width: 2; }
.link.dimmed { stroke-opacity: 0.02; }

.node circle { stroke-width: 1.5; transition: opacity 0.2s; }
.node text { pointer-events: none; transition: opacity 0.2s; }
.node.dimmed circle, .node.dimmed text { opacity: 0.06; }

.domain-hull { pointer-events: none; }
.domain-label { pointer-events: none; font-size: 12px; font-weight: 700; text-anchor: middle; }

#heatmap-legend {
  display: none; flex-direction: column; gap: 4px; margin-top: 8px;
  padding-top: 8px; border-top: 1px solid #21262d;
}
.heatmap-bar { width: 100%; height: 10px; border-radius: 4px; background: linear-gradient(to right, #3fb950, #d29922, #f47067); }
.heatmap-labels { display: flex; justify-content: space-between; font-size: 10px; color: #8b949e; }
</style>
</head>
<body>
<div id="controls">
  <input type="text" id="search" placeholder="Search...">
  <div class="sep"></div>
  <button class="btn active" data-filter="all">All</button>
  <button class="btn" data-filter="controller">Controllers</button>
  <button class="btn" data-filter="router">Routers</button>
  <button class="btn" data-filter="service">Services</button>
  <button class="btn" data-filter="model">Models</button>
  <button class="btn" data-filter="client">Clients</button>
  <div class="sep"></div>
  <label class="stat" style="display:flex;align-items:center;gap:4px;" title="How many hops from the selected node to highlight">Depth <input type="number" id="depth" value="2" min="1" max="10" style="width:42px;background:#0d1117;border:1px solid #30363d;color:#c9d1d9;padding:3px 6px;border-radius:4px;font-size:12px;text-align:center;"></label>
  <div class="sep"></div>
  <label class="stat" style="display:flex;align-items:center;gap:4px;" title="What drives node size">Size <select id="size-mode" style="background:#0d1117;border:1px solid #30363d;color:#c9d1d9;padding:3px 6px;border-radius:4px;font-size:12px;"><option value="edges">Edges</option><option value="lines">Lines</option><option value="commits">Commits</option><option value="authors">Authors</option><option value="churn">Churn (6mo)</option></select></label>
  <div class="sep"></div>
  <label class="stat" style="display:flex;align-items:center;gap:4px;" title="Node color scheme">Color <select id="color-mode" style="background:#0d1117;border:1px solid #30363d;color:#c9d1d9;padding:3px 6px;border-radius:4px;font-size:12px;"><option value="type">Type</option><option value="health">Health</option></select></label>
  <div class="sep"></div>
  <button class="btn active" id="btn-arrows">Arrows</button>
  <div class="sep"></div>
  <button class="btn active" id="btn-domains">Domains</button>
  <div class="sep"></div>
  <button class="btn" id="btn-ee" style="display:none">EE</button>
  <div class="sep" id="sep-ee" style="display:none"></div>
  <button class="btn" id="btn-reset">Reset</button>
</div>
<div id="legend">
  <span class="stat stat-c"><b>41</b> controllers</span>
  <span class="stat stat-r"><b>12</b> routers</span>
  <span class="stat stat-s"><b>48</b> services</span>
  <span class="stat stat-m"><b>56</b> models</span>
  <span class="stat stat-k"><b>7</b> clients</span>
  <span class="stat"><b>448</b> edges</span>
  <div id="heatmap-legend">
    <div class="heatmap-labels"><span>Healthy</span><span>Hot</span></div>
    <div class="heatmap-bar"></div>
  </div>
</div>
<div id="tooltip"></div>
<svg></svg>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script>
const raw = {"nodes":[{"id":"ChangesetController","type":"controller","lineCount":122,"gitActivity":{"commits":4,"authors":3,"churn":4,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"c76bd9635b","message":"fix: if a change is deleted, show it as reverted in the Agent ui (#17275)","author":"Giorgi Bagdavadze","relativeDate":"4 months ago"},{"hash":"3a699bef93","message":"feat: add API endpoints to revert changes in changesets (#17235)","author":"Giorgi Bagdavadze","relativeDate":"4 months ago"}]},"domain":"Catalog","gitSummary":"Add JSDoc summaries to all handler methods\nShow deleted changes as reverted in Agent UI\nAdd endpoints to revert Agent-proposed changes","healthSummary":"Stable, minimal coupling — low maintenance burden"},{"id":"OrganizationRolesController","type":"controller","lineCount":198,"gitActivity":{"commits":6,"authors":3,"churn":6,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"e3ffa65d21","message":"feat: add duplicate role endpoint (#16610)","author":"Steve Gardner","relativeDate":"5 months ago"},{"hash":"26d444e6c9","message":"feat: add assigning scopes to custom roles (#16601)","author":"Steve Gardner","relativeDate":"5 months ago"}]},"domain":"Roles & Permissions","gitSummary":"Add JSDoc summaries to all handler methods\nAdd endpoint to duplicate existing roles\nEnable assigning scopes to custom roles","healthSummary":"Stable utility, low coupling with moderate activity"},{"id":"ProjectRolesController","type":"controller","lineCount":249,"gitActivity":{"commits":2,"authors":2,"churn":2,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"667efe54c0","message":"fix: move new role system endpoints to oss (#16563)","author":"Javier Rengel Jiménez","relativeDate":"6 months ago"}]},"domain":"Roles & Permissions","gitSummary":"Add JSDoc summaries to all handler methods\nMove new role system to open source edition\nIntroduce new role management endpoints","healthSummary":"Stable, isolated controller — minimal risk"},{"id":"bigquerySSOController","type":"controller","lineCount":68,"gitActivity":{"commits":2,"authors":2,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"34f3f664c7","message":"feat: bigquery SSO project creation (#15026)","author":"Javier Rengel Jiménez","relativeDate":"8 months ago"}]},"domain":"User Auth","gitSummary":"Add JSDoc summaries to all handler methods\nEnable BigQuery SSO during project creation\nSupport SSO authentication for BigQuery","healthSummary":"Minimal footprint, stable SSO integration"},{"id":"catalogController","type":"controller","lineCount":638,"gitActivity":{"commits":37,"authors":7,"churn":8,"recentCommits":[{"hash":"6ff95b3213","message":"feat: remove canvas view based on metrics limitation (#19958)","author":"Tatiana Inama","relativeDate":"2 days ago"},{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"fc1d0b9938","message":"feat: support compare to another metric in metric explore modal v2 (#19727)","author":"João Viana","relativeDate":"10 days ago"}]},"domain":"Catalog","gitSummary":"Remove canvas view for metrics-limited orgs\nAdd JSDoc summaries to all handler methods\nSupport metric-to-metric comparison in explorer","healthSummary":"Large (638 lines) with moderate churn — complex but manageable\nCollaboration across 7 authors suggests shared ownership"},{"id":"commentsController","type":"controller","lineCount":158,"gitActivity":{"commits":9,"authors":7,"churn":2,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"0299884c6c","message":"feat: allow fetching dashboards and charts by slug (#17292)","author":"Steve Gardner","relativeDate":"4 months ago"},{"hash":"3b55ad3dfd","message":"chore: disable promotion and dashboard comments in demo (#11287)","author":"Jose Rego","relativeDate":"1 year, 5 months ago"}]},"domain":"Notifications","gitSummary":"Add JSDoc summaries to all handler methods\nAllow fetching content by slug identifier\nDisable comments in demo environment","healthSummary":"Stable, low coupling — minimal maintenance needed"},{"id":"csvController","type":"controller","lineCount":53,"gitActivity":{"commits":8,"authors":5,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"e75205cbbe","message":"fix: show error when downloading CSV (#12580)","author":"Jose Rego","relativeDate":"1 year, 3 months ago"},{"hash":"7f41a8a854","message":"chore: update controllers to use injected `ServiceRepository` for service access (#9234)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"}]},"domain":"Scheduling","gitSummary":"Add JSDoc summaries to all handler methods\nShow error messages when CSV download fails\nRefactor to use injected ServiceRepository","healthSummary":"Stable utility, minimal coupling and churn"},{"id":"dashboardController","type":"controller","lineCount":138,"gitActivity":{"commits":6,"authors":4,"churn":3,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"ad5b9e5582","message":"feat: add dashboards and saved charts v2 controller with pagination for schedulers (#19718)","author":"Bruno Almeida","relativeDate":"12 days ago"},{"hash":"d674b0c9d1","message":"chore: move scheduler calls to dashboard & chart controllers (#19695)","author":"Bruno Almeida","relativeDate":"12 days ago"}]},"domain":"Dashboards","gitSummary":"Add JSDoc summaries to all handler methods\nAdd v2 controller with pagination for schedulers\nMove scheduler-related calls to controller","healthSummary":"Stable with low coupling — minimal risk"},{"id":"exploreController","type":"controller","lineCount":238,"gitActivity":{"commits":24,"authors":10,"churn":3,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"cc8dc36884","message":"feat: add pivot sql to compile sql endpoint (#19743)","author":"Bruno Almeida","relativeDate":"9 days ago"},{"hash":"43ed90c4a7","message":"feat: allow changing date/timestamp dimensions' formatting in results table (#19277)","author":"João Viana","relativeDate":"4 weeks ago"}]},"domain":"Explores","gitSummary":"Add JSDoc summaries to all handler methods\nAdd pivot SQL to compile SQL endpoint\nAllow changing date format in results table","healthSummary":"Moderate size (238 lines), stable — well-maintained utility"},{"id":"funnelController","type":"controller","lineCount":90,"gitActivity":{"commits":1,"authors":1,"churn":1,"recentCommits":[{"hash":"6782ab25ce","message":"feat(prototype): funnel builder API (#19344)","author":"Oliver Laslett","relativeDate":"4 weeks ago"}]},"domain":"Explores","gitSummary":"Implement funnel builder API endpoints\nAdd funnel analysis query capabilities\nCreate prototype funnel tracking system","healthSummary":"New, stable feature — single author, no activity"},{"id":"gitIntegrationController","type":"controller","lineCount":217,"gitActivity":{"commits":14,"authors":7,"churn":2,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"2757f30457","message":"feat: add editor for yml files (#18788)","author":"Oliver Laslett","relativeDate":"8 weeks ago"},{"hash":"d77a9f6d61","message":"feat: preview branch (#14222)","author":"Javier Rengel Jiménez","relativeDate":"10 months ago"}]},"domain":"Git Integration","gitSummary":"Add JSDoc summaries to all handler methods\nAdd YAML file editor for dbt files\nImplement preview branch functionality","healthSummary":"Moderate size (217 lines), stable — low risk"},{"id":"githubController","type":"controller","lineCount":162,"gitActivity":{"commits":11,"authors":3,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"b106bce16e","message":"feat: GitHub login full flow (#13701)","author":"Javier Rengel Jiménez","relativeDate":"12 months ago"},{"hash":"e7ad392d06","message":"chore: Analytic events write back + refactor (#11998)","author":"Javier Rengel Jiménez","relativeDate":"1 year, 4 months ago"}]},"domain":"Git Integration","gitSummary":"Add JSDoc summaries to all handler methods\nImplement full GitHub login flow\nRefactor analytic events write-back","healthSummary":"Stable integration, minimal recent activity"},{"id":"gitlabController","type":"controller","lineCount":137,"gitActivity":{"commits":2,"authors":2,"churn":2,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"43c4b82352","message":"feat: gitlab integration (#16633)","author":"Javier Rengel Jiménez","relativeDate":"5 months ago"}]},"domain":"Git Integration","gitSummary":"Add JSDoc summaries to all handler methods\nImplement GitLab integration for projects\nAdd GitLab authentication support","healthSummary":"Stable integration, minimal coupling and activity"},{"id":"googleDriveController","type":"controller","lineCount":71,"gitActivity":{"commits":7,"authors":4,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"58857a1215","message":"refactor: client injection in services (#9382)","author":"Jose Rego","relativeDate":"1 year, 11 months ago"},{"hash":"7f41a8a854","message":"chore: update controllers to use injected `ServiceRepository` for service access (#9234)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"}]},"domain":"Integrations","gitSummary":"Add JSDoc summaries to all handler methods\nRefactor client injection in services\nUpdate to use injected ServiceRepository","healthSummary":"Stable integration, minimal maintenance burden"},{"id":"groupsController","type":"controller","lineCount":299,"gitActivity":{"commits":11,"authors":6,"churn":2,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"2b7007e319","message":"fix: migrate project access to new endpoints (#16570)","author":"Javier Rengel Jiménez","relativeDate":"6 months ago"},{"hash":"7f41a8a854","message":"chore: update controllers to use injected `ServiceRepository` for service access (#9234)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"}]},"domain":"Roles & Permissions","gitSummary":"Add JSDoc summaries to all handler methods\nMigrate project access to new endpoints\nUpdate to use injected ServiceRepository","healthSummary":"Large (299 lines) but stable — complex but not risky"},{"id":"metricsExplorerController","type":"controller","lineCount":121,"gitActivity":{"commits":17,"authors":5,"churn":4,"recentCommits":[{"hash":"6c3af36fb7","message":"refactor: remove deprecated metrics explorer query endpoint (#20053)","author":"Giorgi Bagdavadze","relativeDate":"26 hours ago"},{"hash":"d913502224","message":"feat: add rolling days comparison option to metrics explorer (#19959)","author":"Giorgi Bagdavadze","relativeDate":"2 days ago"},{"hash":"5a697db216","message":"feat: view compiled sql for metric tree metric total (#19935)","author":"Giorgi Bagdavadze","relativeDate":"3 days ago"}]},"domain":"Explores","gitSummary":"Remove deprecated query endpoint\nAdd rolling days comparison for metrics\nAdd compiled SQL view for metric totals","healthSummary":"Moderate churn (4) but low coupling — manageable"},{"id":"notificationsController","type":"controller","lineCount":81,"gitActivity":{"commits":4,"authors":3,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"7f41a8a854","message":"chore: update controllers to use injected `ServiceRepository` for service access (#9234)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"},{"hash":"5798a37822","message":"chore: update controllers to use new `BaseController` (#9233)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"}]},"domain":"Notifications","gitSummary":"Add JSDoc summaries to all handler methods\nUpdate to use injected ServiceRepository\nMigrate to new BaseController pattern","healthSummary":"Stable utility, minimal maintenance needed"},{"id":"organizationController","type":"controller","lineCount":634,"gitActivity":{"commits":34,"authors":12,"churn":5,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"9db17776dc","message":"fix(backend): allow for filtering users with google refresh token (#19161)","author":"Bruno Almeida","relativeDate":"5 weeks ago"},{"hash":"d113a87df0","message":"feat(backend): reassign user scheduled delivers on delete (#19132)","author":"Bruno Almeida","relativeDate":"6 weeks ago"}]},"domain":"Organizations","gitSummary":"Add JSDoc summaries to all handler methods\nAdd filter for users with Google tokens\nReassign scheduled deliveries on user delete","healthSummary":"Hot spot: high coupling (4 edges) with 12 authors\nLarge (634 lines) coordination bottleneck"},{"id":"pinningController","type":"controller","lineCount":95,"gitActivity":{"commits":8,"authors":5,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"7f41a8a854","message":"chore: update controllers to use injected `ServiceRepository` for service access (#9234)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"},{"hash":"5798a37822","message":"chore: update controllers to use new `BaseController` (#9233)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"}]},"domain":"Content","gitSummary":"Add JSDoc summaries to all handler methods\nUpdate to use injected ServiceRepository\nMigrate to new BaseController pattern","healthSummary":"Stable utility, low maintenance burden"},{"id":"projectCompileLogController","type":"controller","lineCount":113,"gitActivity":{"commits":2,"authors":2,"churn":2,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"4353a812bc","message":"feat(backend): project compile log model, service and controller (#17577)","author":"Tatiana Inama","relativeDate":"3 months ago"}]},"domain":"Projects","gitSummary":"Add JSDoc summaries to all handler methods\nAdd project compile log tracking endpoints\nCreate compile log model and service","healthSummary":"Stable, minimal coupling — low risk"},{"id":"projectController","type":"controller","lineCount":1195,"gitActivity":{"commits":59,"authors":14,"churn":8,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"257b22d032","message":"fix: improve content-as-code validation (#19375)","author":"Giorgi Bagdavadze","relativeDate":"3 weeks ago"},{"hash":"81fb6be86a","message":"fix: {projectUuid}/spaces explicit user session validation (#18961)","author":"Yegor Borisenco","relativeDate":"7 weeks ago"}]},"domain":"Projects","gitSummary":"Add JSDoc summaries to all handler methods\nImprove content-as-code validation checks\nAdd explicit user session validation","healthSummary":"Critical hot spot: high coupling (4 edges), 1195 lines\n14 authors, 59 commits — major coordination bottleneck"},{"id":"renameController","type":"controller","lineCount":142,"gitActivity":{"commits":3,"authors":2,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"6fd8156986","message":"fix: ui improvement to rename in validation (#14872)","author":"Javier Rengel Jiménez","relativeDate":"9 months ago"},{"hash":"bea8ada817","message":"feat: rename models and fields in CLI and UI  (#14657)","author":"Javier Rengel Jiménez","relativeDate":"9 months ago"}]},"domain":"Content","gitSummary":"Add JSDoc summaries to all handler methods\nImprove UI for rename validation feedback\nAdd rename for models and fields","healthSummary":"Stable, isolated controller — minimal activity"},{"id":"runQueryController","type":"controller","lineCount":191,"gitActivity":{"commits":26,"authors":11,"churn":2,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"43ed90c4a7","message":"feat: allow changing date/timestamp dimensions' formatting in results table (#19277)","author":"João Viana","relativeDate":"4 weeks ago"},{"hash":"3287365050","message":"fix: Revert \"fix: Revert \"feat: refactor AsyncQuery and Project service to use account where needed for Embedded Explores (#15893)\" (#16007)\" (#16023)","author":"Steve Gardner","relativeDate":"7 months ago"}]},"domain":"Explores","gitSummary":"Add JSDoc summaries to all handler methods\nAllow changing date format in results table\nRefactor AsyncQuery service for embeds","healthSummary":"Moderate size (191 lines), stable — manageable"},{"id":"savedChartController","type":"controller","lineCount":466,"gitActivity":{"commits":37,"authors":12,"churn":3,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"ad5b9e5582","message":"feat: add dashboards and saved charts v2 controller with pagination for schedulers (#19718)","author":"Bruno Almeida","relativeDate":"12 days ago"},{"hash":"d674b0c9d1","message":"chore: move scheduler calls to dashboard & chart controllers (#19695)","author":"Bruno Almeida","relativeDate":"12 days ago"}]},"domain":"Saved Charts","gitSummary":"Add JSDoc summaries to all handler methods\nAdd v2 controller with pagination for schedulers\nMove scheduler-related calls to controller","healthSummary":"High coupling (5 edges), large (466 lines)\n12 authors suggest coordination complexity"},{"id":"schedulerController","type":"controller","lineCount":638,"gitActivity":{"commits":23,"authors":9,"churn":8,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"a04eb24cf6","message":"feat: add `my scheduled deliveries` user settings page (#19571)","author":"Lukas Spiss","relativeDate":"2 weeks ago"},{"hash":"426f685832","message":"feat(wip): add endpoint to reassign scheduled deliveries in bulk (#19041)","author":"Bruno Almeida","relativeDate":"7 weeks ago"}]},"domain":"Scheduling","gitSummary":"Add JSDoc summaries to all handler methods\nAdd user settings for scheduled deliveries\nAdd bulk reassign deliveries endpoint","healthSummary":"Large hot spot: 638 lines, 8 churn, 9 authors\nHigh complexity with active maintenance burden"},{"id":"shareController","type":"controller","lineCount":73,"gitActivity":{"commits":7,"authors":5,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"7f41a8a854","message":"chore: update controllers to use injected `ServiceRepository` for service access (#9234)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"},{"hash":"5798a37822","message":"chore: update controllers to use new `BaseController` (#9233)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"}]},"domain":"Content","gitSummary":"Add JSDoc summaries to all handler methods\nUpdate to use injected ServiceRepository\nMigrate to new BaseController pattern","healthSummary":"Stable utility, minimal maintenance needed"},{"id":"slackController","type":"controller","lineCount":259,"gitActivity":{"commits":17,"authors":9,"churn":3,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"290d991737","message":"feat: use db cache for slack channel fetching (#18660)","author":"João Viana","relativeDate":"8 weeks ago"},{"hash":"4694c1a284","message":"feat: new slack channel selector component (#18492)","author":"Irakli Janiashvili","relativeDate":"9 weeks ago"}]},"domain":"Slack","gitSummary":"Add JSDoc summaries to all handler methods\nUse database cache for Slack channels\nAdd new channel selector component","healthSummary":"Moderate coupling (3 edges), stable — manageable\n9 authors suggest shared ownership"},{"id":"spaceController","type":"controller","lineCount":298,"gitActivity":{"commits":12,"authors":8,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"b2f714549c","message":"feat: unify all content item actions (only move so far) bulk or single (#14745)","author":"Irakli Janiashvili","relativeDate":"9 months ago"},{"hash":"05e09a723c","message":"feat: resource bulk actions - move to another space (#14704)","author":"Irakli Janiashvili","relativeDate":"9 months ago"}]},"domain":"Spaces","gitSummary":"Add JSDoc summaries to all handler methods\nUnify all content item move actions\nAdd bulk move to another space","healthSummary":"Large (298 lines) but stable — complex but low risk"},{"id":"spotlightController","type":"controller","lineCount":114,"gitActivity":{"commits":3,"authors":3,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"d479c14edf","message":"fix: get spotlight config and tags authorized in demo (#13389)","author":"Bruno Almeida","relativeDate":"1 year ago"},{"hash":"741731967a","message":"feat: allow curating Spotlight's table (#13355)","author":"João Viana","relativeDate":"1 year, 1 month ago"}]},"domain":"Spotlight","gitSummary":"Add JSDoc summaries to all handler methods\nFix config and tags access in demo\nAdd table curation capabilities","healthSummary":"Stable utility, minimal coupling and activity"},{"id":"sqlRunnerController","type":"controller","lineCount":591,"gitActivity":{"commits":37,"authors":9,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"3287365050","message":"fix: Revert \"fix: Revert \"feat: refactor AsyncQuery and Project service to use account where needed for Embedded Explores (#15893)\" (#16007)\" (#16023)","author":"Steve Gardner","relativeDate":"7 months ago"},{"hash":"9356f4e354","message":"fix: Revert \"feat: refactor AsyncQuery and Project service to use account where needed for Embedded Explores (#15893)\" (#16007)","author":"Steve Gardner","relativeDate":"7 months ago"}]},"domain":"SQL Runner","gitSummary":"Add JSDoc summaries to all handler methods\nRefactor AsyncQuery service for embeds\nRevert AsyncQuery refactor temporarily","healthSummary":"Large (591 lines) with coupling (3 edges) but stable\nComplex but not actively changing"},{"id":"sshController","type":"controller","lineCount":39,"gitActivity":{"commits":6,"authors":4,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"7f41a8a854","message":"chore: update controllers to use injected `ServiceRepository` for service access (#9234)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"},{"hash":"5798a37822","message":"chore: update controllers to use new `BaseController` (#9233)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"}]},"domain":"Infrastructure","gitSummary":"Add JSDoc summaries to all handler methods\nUpdate to use injected ServiceRepository\nMigrate to new BaseController pattern","healthSummary":"Minimal footprint, stable — low risk"},{"id":"userActivityController","type":"controller","lineCount":119,"gitActivity":{"commits":3,"authors":2,"churn":2,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"70288f5f44","message":"feat: add unused content dashboard to analytics (#16757)","author":"Javier Rengel Jiménez","relativeDate":"5 months ago"},{"hash":"872355ee41","message":"fix: download raw usage analytics (#14471)","author":"Javier Rengel Jiménez","relativeDate":"10 months ago"}]},"domain":"AI & Analytics","gitSummary":"Add JSDoc summaries to all handler methods\nAdd unused content to analytics dashboard\nFix raw usage analytics download","healthSummary":"Stable utility, minimal maintenance burden"},{"id":"userAttributesController","type":"controller","lineCount":143,"gitActivity":{"commits":6,"authors":4,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"7f41a8a854","message":"chore: update controllers to use injected `ServiceRepository` for service access (#9234)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"},{"hash":"5798a37822","message":"chore: update controllers to use new `BaseController` (#9233)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"}]},"domain":"User Management","gitSummary":"Add JSDoc summaries to all handler methods\nUpdate to use injected ServiceRepository\nMigrate to new BaseController pattern","healthSummary":"Stable, isolated controller — minimal risk"},{"id":"userController","type":"controller","lineCount":499,"gitActivity":{"commits":20,"authors":9,"churn":2,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"5862adebd4","message":"fix: handle undefined req.user in user endpoints (#18888)","author":"Yegor Borisenco","relativeDate":"7 weeks ago"},{"hash":"60b9386c98","message":"feat: add OAuth2 server for CLI authentication (#15889)","author":"Javier Rengel Jiménez","relativeDate":"7 months ago"}]},"domain":"User Auth","gitSummary":"Add JSDoc summaries to all handler methods\nHandle undefined req.user in endpoints\nAdd OAuth2 server for CLI authentication","healthSummary":"Large (499 lines), stable — complex but not risky\n9 authors suggest good knowledge distribution"},{"id":"v2/ContentController","type":"controller","lineCount":142,"gitActivity":{"commits":9,"authors":5,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"154ab4ed2d","message":"chore: add sqlRunner controller and content controller to docs (#15508)","author":"Bruno Almeida","relativeDate":"8 months ago"},{"hash":"b2f714549c","message":"feat: unify all content item actions (only move so far) bulk or single (#14745)","author":"Irakli Janiashvili","relativeDate":"9 months ago"}]},"domain":"Content","gitSummary":"Add JSDoc summaries to all handler methods\nAdd SQL runner and content to API docs\nUnify all content item move actions","healthSummary":"Stable v2 API, minimal coupling and activity"},{"id":"v2/DashboardController","type":"controller","lineCount":76,"gitActivity":{"commits":1,"authors":1,"churn":1,"recentCommits":[{"hash":"ad5b9e5582","message":"feat: add dashboards and saved charts v2 controller with pagination for schedulers (#19718)","author":"Bruno Almeida","relativeDate":"12 days ago"}]},"domain":"Dashboards","gitSummary":"Add v2 controller with scheduler pagination\nImplement paginated dashboard list endpoint\nCreate dedicated v2 dashboard API","healthSummary":"New v2 API, minimal activity — stable"},{"id":"v2/FeatureFlagController","type":"controller","lineCount":43,"gitActivity":{"commits":2,"authors":2,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"91d8187d74","message":"chore: feature flag endpoint (#12947)","author":"Jose Rego","relativeDate":"1 year, 2 months ago"}]},"domain":"Feature Flags","gitSummary":"Add JSDoc summaries to all handler methods\nAdd feature flag API endpoint\nCreate feature flag controller","healthSummary":"Minimal footprint, stable v2 feature"},{"id":"v2/ParametersController","type":"controller","lineCount":140,"gitActivity":{"commits":6,"authors":4,"churn":4,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"f7f0a7478c","message":"feat: add number to parameter value types (#16543)","author":"Yegor Borisenco","relativeDate":"6 months ago"},{"hash":"a075a3e8f3","message":"feat: add model-level parameters to project parameters list (#16418)","author":"Yegor Borisenco","relativeDate":"6 months ago"}]},"domain":"Projects","gitSummary":"Add JSDoc summaries to all handler methods\nAdd number type to parameter values\nAdd model-level parameters to API","healthSummary":"Moderate churn (4) but manageable — low coupling"},{"id":"v2/QueryController","type":"controller","lineCount":546,"gitActivity":{"commits":34,"authors":8,"churn":12,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"fde8e0ff15","message":"chore: remove global pop & pop fields on additional metrics (#19697)","author":"João Viana","relativeDate":"10 days ago"},{"hash":"6d8181f17e","message":"feat: include sort in underlying data CSV export (#19755)","author":"Oliver Laslett","relativeDate":"11 days ago"}]},"domain":"Explores","gitSummary":"Add JSDoc summaries to all handler methods\nRemove global PoP fields on metrics\nInclude sort in underlying data export","healthSummary":"Hot spot: large (546 lines), high churn (12)\n8 authors suggest active development"},{"id":"v2/SavedChartController","type":"controller","lineCount":82,"gitActivity":{"commits":1,"authors":1,"churn":1,"recentCommits":[{"hash":"ad5b9e5582","message":"feat: add dashboards and saved charts v2 controller with pagination for schedulers (#19718)","author":"Bruno Almeida","relativeDate":"12 days ago"}]},"domain":"Saved Charts","gitSummary":"Add v2 controller with scheduler pagination\nImplement paginated chart list endpoint\nCreate dedicated v2 chart API","healthSummary":"New v2 API, minimal activity — stable"},{"id":"validationController","type":"controller","lineCount":132,"gitActivity":{"commits":15,"authors":8,"churn":2,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"39474ff071","message":"fix: add option to validate only specified explores (#17026)","author":"Jose Rego","relativeDate":"5 months ago"},{"hash":"3d04a286ff","message":"chore: Replace all any types with AnyType (#13376)","author":"devin-ai-integration[bot]","relativeDate":"1 year ago"}]},"domain":"Validation","gitSummary":"Add JSDoc summaries to all handler methods\nAdd option to validate specific explores\nReplace all any types with AnyType","healthSummary":"Stable utility, low coupling — manageable"},{"id":"apiV1Router","type":"router","lineCount":338,"gitActivity":{"commits":51,"authors":13,"churn":8,"recentCommits":[{"hash":"348ebd87e9","message":"fix: preserve query params in Slack auth redirect (#19526)","author":"Irakli Janiashvili","relativeDate":"3 weeks ago"},{"hash":"a680d23f72","message":"feat: process Slack messages after OAuth authentication completes (#19525)","author":"Irakli Janiashvili","relativeDate":"3 weeks ago"},{"hash":"5862adebd4","message":"fix: handle undefined req.user in user endpoints (#18888)","author":"Yegor Borisenco","relativeDate":"7 weeks ago"}]},"domain":"Infrastructure","gitSummary":"Preserve query params in Slack redirect\nProcess Slack messages after OAuth completes\nHandle undefined req.user in endpoints","healthSummary":"Large (338 lines) with active churn (8)\n13 authors — critical coordination point"},{"id":"dashboardRouter","type":"router","lineCount":178,"gitActivity":{"commits":21,"authors":9,"churn":3,"recentCommits":[{"hash":"d674b0c9d1","message":"chore: move scheduler calls to dashboard & chart controllers (#19695)","author":"Bruno Almeida","relativeDate":"12 days ago"},{"hash":"bdf0e99b45","message":"chore: improve tsconfig for incremental builds (#17482)","author":"Steve Gardner","relativeDate":"4 months ago"},{"hash":"0299884c6c","message":"feat: allow fetching dashboards and charts by slug (#17292)","author":"Steve Gardner","relativeDate":"4 months ago"}]},"domain":"Dashboards","gitSummary":"Move scheduler calls to dashboard controller\nImprove tsconfig for incremental builds\nAllow fetching dashboards by slug","healthSummary":"High coupling (5 edges), moderate churn\n9 authors suggest shared ownership burden"},{"id":"headlessBrowser","type":"router","lineCount":231,"gitActivity":{"commits":17,"authors":9,"churn":2,"recentCommits":[{"hash":"7217a1ff16","message":"chore: add detailed logging for headless browser authentication (#19349)","author":"Jose Rego","relativeDate":"4 weeks ago"},{"hash":"bdf0e99b45","message":"chore: improve tsconfig for incremental builds (#17482)","author":"Steve Gardner","relativeDate":"4 months ago"},{"hash":"d66c8ff38b","message":"chore: deploy previews with okteto (#14925)","author":"Oliver Laslett","relativeDate":"8 months ago"}]},"domain":"Infrastructure","gitSummary":"Add detailed logging for authentication\nImprove tsconfig for incremental builds\nAdd Okteto deploy preview support","healthSummary":"Large (231 lines) but stable — complex but low risk"},{"id":"inviteLinksRouter","type":"router","lineCount":68,"gitActivity":{"commits":7,"authors":5,"churn":1,"recentCommits":[{"hash":"bdf0e99b45","message":"chore: improve tsconfig for incremental builds (#17482)","author":"Steve Gardner","relativeDate":"4 months ago"},{"hash":"acf7af7671","message":"chore: no unchecked index values (#13418)","author":"Javier Rengel Jiménez","relativeDate":"1 year ago"},{"hash":"6203ced1ef","message":"chore: migrate routes to use ServiceRepository (#9242)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"}]},"domain":"User Auth","gitSummary":"Improve tsconfig for incremental builds\nFix unchecked index value access\nMigrate routes to ServiceRepository","healthSummary":"Stable utility, minimal maintenance burden"},{"id":"jobsRouter","type":"router","lineCount":32,"gitActivity":{"commits":5,"authors":4,"churn":1,"recentCommits":[{"hash":"bdf0e99b45","message":"chore: improve tsconfig for incremental builds (#17482)","author":"Steve Gardner","relativeDate":"4 months ago"},{"hash":"6203ced1ef","message":"chore: migrate routes to use ServiceRepository (#9242)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"},{"hash":"b83d08d5d1","message":"feat: refresh command (#3627)","author":"Jose Rego","relativeDate":"3 years, 3 months ago"}]},"domain":"Scheduling","gitSummary":"Improve tsconfig for incremental builds\nMigrate routes to ServiceRepository\nAdd refresh command functionality","healthSummary":"Minimal footprint, stable — low risk"},{"id":"mcpRouter","type":"router","lineCount":226,"gitActivity":{"commits":8,"authors":5,"churn":7,"recentCommits":[{"hash":"b1291b28b7","message":"feat: support service account authentication for MCP (#19738)","author":"Javier Rengel Jiménez","relativeDate":"11 days ago"},{"hash":"cf3788b8a7","message":"chore: allow mcp user attribute overrides (#18521)","author":"João Viana","relativeDate":"9 weeks ago"},{"hash":"bdf0e99b45","message":"chore: improve tsconfig for incremental builds (#17482)","author":"Steve Gardner","relativeDate":"4 months ago"}]},"domain":"MCP","gitSummary":"Support service account authentication for MCP\nAllow MCP user attribute overrides\nImprove tsconfig for incremental builds","healthSummary":"Large (226 lines) with hot churn (7 in 6mo)\n5 authors — active development area"},{"id":"oauthRouter","type":"router","lineCount":438,"gitActivity":{"commits":8,"authors":5,"churn":6,"recentCommits":[{"hash":"67b322ef64","message":"feat: improve oauth page styling (#18075)","author":"Oliver Laslett","relativeDate":"3 months ago"},{"hash":"bdf0e99b45","message":"chore: improve tsconfig for incremental builds (#17482)","author":"Steve Gardner","relativeDate":"4 months ago"},{"hash":"c84ecf1d4e","message":"feat: add MCP server protected resource discovery endpoint (#16618)","author":"Irakli Janiashvili","relativeDate":"5 months ago"}]},"domain":"User Auth","gitSummary":"Improve OAuth page styling\nImprove tsconfig for incremental builds\nAdd MCP protected resource discovery","healthSummary":"Large (438 lines) with moderate churn\nCritical auth component with 5 authors"},{"id":"organizationRouter","type":"router","lineCount":94,"gitActivity":{"commits":24,"authors":11,"churn":1,"recentCommits":[{"hash":"bdf0e99b45","message":"chore: improve tsconfig for incremental builds (#17482)","author":"Steve Gardner","relativeDate":"4 months ago"},{"hash":"862a7fbd26","message":"feat: add --skip-copy-content option to preview and start-preview commands (#15549)","author":"Bruno Almeida","relativeDate":"8 months ago"},{"hash":"46889c2050","message":"chore: move project creation to scheduler (#12570)","author":"Jose Rego","relativeDate":"1 year, 2 months ago"}]},"domain":"Organizations","gitSummary":"Improve tsconfig for incremental builds\nAdd skip-copy-content option for preview\nMove project creation to scheduler","healthSummary":"Stable with low coupling — minimal risk"},{"id":"passwordResetLinksRouter","type":"router","lineCount":32,"gitActivity":{"commits":3,"authors":3,"churn":1,"recentCommits":[{"hash":"bdf0e99b45","message":"chore: improve tsconfig for incremental builds (#17482)","author":"Steve Gardner","relativeDate":"4 months ago"},{"hash":"6203ced1ef","message":"chore: migrate routes to use ServiceRepository (#9242)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"},{"hash":"04e52d8d55","message":"feat: Reset password (#1119)","author":"Jose Rego","relativeDate":"4 years, 1 month ago"}]},"domain":"User Auth","gitSummary":"Improve tsconfig for incremental builds\nMigrate routes to ServiceRepository\nAdd password reset functionality","healthSummary":"Minimal footprint, stable — low risk"},{"id":"projectRouter","type":"router","lineCount":326,"gitActivity":{"commits":93,"authors":12,"churn":2,"recentCommits":[{"hash":"bdf0e99b45","message":"chore: improve tsconfig for incremental builds (#17482)","author":"Steve Gardner","relativeDate":"4 months ago"},{"hash":"83b413d4fe","message":"chore: track search on ai vs omnibar (#17478)","author":"João Viana","relativeDate":"4 months ago"},{"hash":"9b573a7203","message":"feat: refactor Project and Organaization services to enable iframe explores (#16143)","author":"Steve Gardner","relativeDate":"6 months ago"}]},"domain":"Projects","gitSummary":"Improve tsconfig for incremental builds\nTrack search source (AI vs omnibar)\nRefactor services to enable iframe explores","healthSummary":"Critical hot spot: high coupling (5 edges), 326 lines\n12 authors, 93 commits — major coordination bottleneck"},{"id":"savedChartRouter","type":"router","lineCount":159,"gitActivity":{"commits":19,"authors":7,"churn":3,"recentCommits":[{"hash":"d674b0c9d1","message":"chore: move scheduler calls to dashboard & chart controllers (#19695)","author":"Bruno Almeida","relativeDate":"12 days ago"},{"hash":"bdf0e99b45","message":"chore: improve tsconfig for incremental builds (#17482)","author":"Steve Gardner","relativeDate":"4 months ago"},{"hash":"0299884c6c","message":"feat: allow fetching dashboards and charts by slug (#17292)","author":"Steve Gardner","relativeDate":"4 months ago"}]},"domain":"Saved Charts","gitSummary":"Move scheduler calls to chart controller\nImprove tsconfig for incremental builds\nAllow fetching charts by slug","healthSummary":"Moderate coupling (2 edges), stable — manageable"},{"id":"userRouter","type":"router","lineCount":123,"gitActivity":{"commits":16,"authors":7,"churn":1,"recentCommits":[{"hash":"bdf0e99b45","message":"chore: improve tsconfig for incremental builds (#17482)","author":"Steve Gardner","relativeDate":"4 months ago"},{"hash":"6dae07b7fa","message":"feat: list personal access tokens via API with PAT authentication (#13826)","author":"Jose Rego","relativeDate":"12 months ago"},{"hash":"6203ced1ef","message":"chore: migrate routes to use ServiceRepository (#9242)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"}]},"domain":"User Auth","gitSummary":"Improve tsconfig for incremental builds\nList PATs via API with PAT auth\nMigrate routes to ServiceRepository","healthSummary":"Stable router, minimal maintenance burden"},{"id":"AnalyticsService","type":"service","lineCount":166,"gitActivity":{"commits":14,"authors":6,"churn":1,"recentCommits":[{"hash":"70288f5f44","message":"feat: add unused content dashboard to analytics (#16757)","author":"Javier Rengel Jiménez","relativeDate":"5 months ago"},{"hash":"872355ee41","message":"fix: download raw usage analytics (#14471)","author":"Javier Rengel Jiménez","relativeDate":"10 months ago"},{"hash":"0706a0e080","message":"fix: fix some ANyTypes across our codebase (#13406)","author":"Javier Rengel Jiménez","relativeDate":"1 year ago"}]},"domain":"AI & Analytics","gitSummary":"Add unused content to analytics dashboard\nFix raw usage analytics download\nFix AnyType usage across codebase","healthSummary":"High coupling (5 edges) but stable — manageable"},{"id":"AsyncQueryService","type":"service","lineCount":3487,"gitActivity":{"commits":134,"authors":10,"churn":63,"recentCommits":[{"hash":"205f4e4124","message":"feat: add conditional inheritance chain check to model and fix all calls (#19947)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"7a080decf4","message":"fix: support empty index pivoting (#19728)","author":"Bruno Almeida","relativeDate":"9 days ago"},{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"}]},"domain":"Explores","gitSummary":"Add conditional inheritance chain check\nSupport empty index pivoting for tables\nBump prettier and organize imports","healthSummary":"Critical hot spot: 38 edges, 3487 lines, 63 churn\n10 authors — massive coordination bottleneck, high risk"},{"id":"CatalogService","type":"service","lineCount":1533,"gitActivity":{"commits":92,"authors":9,"churn":23,"recentCommits":[{"hash":"fe9df9ed4f","message":"fix: default time dimension selection for metrics on canvas (#20060)","author":"Giorgi Bagdavadze","relativeDate":"23 hours ago"},{"hash":"6ff95b3213","message":"feat: remove canvas view based on metrics limitation (#19958)","author":"Tatiana Inama","relativeDate":"2 days ago"},{"hash":"1aee92d349","message":"feat: check for inheritance chain space access (#19937)","author":"Bruno Almeida","relativeDate":"3 days ago"}]},"domain":"Catalog","gitSummary":"Fix default time dimension for canvas metrics\nRemove canvas view for metrics-limited orgs\nCheck for inheritance chain space access","healthSummary":"Large hot spot: 12 edges, 1533 lines, 23 churn\n9 authors — significant coupling and active churn"},{"id":"ChangesetService","type":"service","lineCount":178,"gitActivity":{"commits":4,"authors":2,"churn":4,"recentCommits":[{"hash":"c76bd9635b","message":"fix: if a change is deleted, show it as reverted in the Agent ui (#17275)","author":"Giorgi Bagdavadze","relativeDate":"4 months ago"},{"hash":"1fbe7b94b8","message":"feat: implement catalog revert functionality for changeset changes (#17259)","author":"Giorgi Bagdavadze","relativeDate":"4 months ago"},{"hash":"3a699bef93","message":"feat: add API endpoints to revert changes in changesets (#17235)","author":"Giorgi Bagdavadze","relativeDate":"4 months ago"}]},"domain":"Catalog","gitSummary":"Show deleted changes as reverted in UI\nImplement catalog revert for changeset changes\nAdd endpoints to revert changes","healthSummary":"Low coupling (4 edges), stable — minimal risk"},{"id":"CoderService","type":"service","lineCount":1511,"gitActivity":{"commits":33,"authors":9,"churn":9,"recentCommits":[{"hash":"d7f8f06b43","message":"fix: include parameters in ChartAsCode for CLI round-trip (#20011)","author":"Charlie Dowler","relativeDate":"2 days ago"},{"hash":"1aee92d349","message":"feat: check for inheritance chain space access (#19937)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"27f878af03","message":"chore: handle inherit/isPrivate during space creation (#19928)","author":"Lukas Spiss","relativeDate":"4 days ago"}]},"domain":"Projects","gitSummary":"Include parameters in ChartAsCode for CLI\nCheck for inheritance chain space access\nHandle inherit/isPrivate during space creation","healthSummary":"Large (1511 lines) with coupling (9 edges)\nStable (9 churn) but complex — monitor for growth"},{"id":"CommentService","type":"service","lineCount":364,"gitActivity":{"commits":20,"authors":11,"churn":4,"recentCommits":[{"hash":"205f4e4124","message":"feat: add conditional inheritance chain check to model and fix all calls (#19947)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"67a8460b89","message":"feat: add dashboard comments feature flag and configuration (#17512)","author":"Yegor Borisenco","relativeDate":"4 months ago"}]},"domain":"Notifications","gitSummary":"Add conditional inheritance chain check\nBump prettier and organize imports\nAdd dashboard comments feature flag","healthSummary":"Moderate coupling (7 edges), stable — manageable"},{"id":"ContentService","type":"service","lineCount":324,"gitActivity":{"commits":11,"authors":6,"churn":4,"recentCommits":[{"hash":"1aee92d349","message":"feat: check for inheritance chain space access (#19937)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"11ab833e8a","message":"refactor: consolidate NotExistsError and NotFoundError (#19093)","author":"Giorgi Bagdavadze","relativeDate":"6 weeks ago"}]},"domain":"Content","gitSummary":"Check for inheritance chain space access\nBump prettier and organize imports\nConsolidate NotExistsError and NotFoundError","healthSummary":"Moderate coupling (9 edges), stable — low risk"},{"id":"CsvService","type":"service","lineCount":1477,"gitActivity":{"commits":119,"authors":21,"churn":12,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"05100432b4","message":"fix: implement stream backpressure handling for file uploads (#19631)","author":"Yegor Borisenco","relativeDate":"12 days ago"},{"hash":"d1f7024627","message":"fix: replace logger.warning with logger.warn method (#19380)","author":"Irakli Janiashvili","relativeDate":"4 weeks ago"}]},"domain":"Scheduling","gitSummary":"Bump prettier and organize imports\nImplement stream backpressure for uploads\nReplace logger.warning with logger.warn","healthSummary":"Hot spot: 14 edges, 1477 lines, 12 churn\n21 authors — high coupling with coordination burden"},{"id":"DashboardService","type":"service","lineCount":1458,"gitActivity":{"commits":102,"authors":19,"churn":8,"recentCommits":[{"hash":"205f4e4124","message":"feat: add conditional inheritance chain check to model and fix all calls (#19947)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"1aee92d349","message":"feat: check for inheritance chain space access (#19937)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"}]},"domain":"Dashboards","gitSummary":"Add conditional inheritance chain check\nCheck for inheritance chain space access\nBump prettier and organize imports","healthSummary":"Hot spot: 17 edges, 1458 lines, 8 churn\n19 authors — major coupling with coordination complexity"},{"id":"DownloadFileService","type":"service","lineCount":42,"gitActivity":{"commits":4,"authors":4,"churn":0,"recentCommits":[{"hash":"67101488a0","message":"chore: introduce BaseService (#9672)","author":"Filipe Dobreira","relativeDate":"1 year, 10 months ago"},{"hash":"2ae2f19057","message":"fix: analytics dependency injection (#9176)","author":"Jose Rego","relativeDate":"1 year, 11 months ago"},{"hash":"d0f328e5e6","message":"refactor: rename type dependencies (#9184)","author":"Jogeshwar Singh","relativeDate":"1 year, 11 months ago"}]},"domain":"Scheduling","gitSummary":"Introduce BaseService pattern\nFix analytics dependency injection\nRename type dependencies","healthSummary":"Minimal coupling (3 edges), stable — low risk"},{"id":"FeatureFlagService","type":"service","domain":"Feature Flags","healthSummary":"Moderate coupling (6 edges) but no code\nLikely interface/proxy — low risk"},{"id":"FunnelService","type":"service","lineCount":534,"gitActivity":{"commits":7,"authors":2,"churn":7,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"fa6ebfce7e","message":"fix: funnel builder sql + state management (#19609)","author":"Oliver Laslett","relativeDate":"2 weeks ago"},{"hash":"5355d34156","message":"feat: improved frontend and backend error handling for funnel builder service (#19581)","author":"Oliver Laslett","relativeDate":"3 weeks ago"}]},"domain":"Explores","gitSummary":"Bump prettier and organize imports\nFix funnel builder SQL and state\nImprove error handling for funnel builder","healthSummary":"Low coupling (3 edges), large (534 lines)\nModerate churn (7) — new feature stabilizing"},{"id":"GdriveService","type":"service","lineCount":127,"gitActivity":{"commits":13,"authors":9,"churn":2,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"ff8480bf04","message":"fix: add new permission check for gsheets (#16489)","author":"Javier Rengel Jiménez","relativeDate":"6 months ago"},{"hash":"9b573a7203","message":"feat: refactor Project and Organaization services to enable iframe explores (#16143)","author":"Steve Gardner","relativeDate":"6 months ago"}]},"domain":"Integrations","gitSummary":"Bump prettier and organize imports\nAdd new permission check for Google Sheets\nRefactor services to enable iframe explores","healthSummary":"Moderate coupling (7 edges) but stable\nMinimal footprint (127 lines) — low risk"},{"id":"GitIntegrationService","type":"service","lineCount":1085,"gitActivity":{"commits":39,"authors":12,"churn":5,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"7a082cd0ac","message":"feat: add GitHub App installation authentication support to GitHub and GitLab client functions (#19716)","author":"Lightdash Bot","relativeDate":"10 days ago"},{"hash":"2757f30457","message":"feat: add editor for yml files (#18788)","author":"Oliver Laslett","relativeDate":"8 weeks ago"}]},"domain":"Git Integration","gitSummary":"Bump prettier and organize imports\nAdd GitHub App installation auth support\nAdd YAML file editor for dbt","healthSummary":"Large (1085 lines) with coupling (7 edges)\nStable — complex but not risky"},{"id":"GithubAppService","type":"service","lineCount":313,"gitActivity":{"commits":11,"authors":4,"churn":2,"recentCommits":[{"hash":"6fb49e6343","message":"feat: implement pagination for GitHub repositories and improve UI display (#19922)","author":"Javier Rengel Jiménez","relativeDate":"4 days ago"},{"hash":"6abb1976a6","message":"fix: improve github error messages (#16830)","author":"Javier Rengel Jiménez","relativeDate":"5 months ago"},{"hash":"35cd889de8","message":"chore: fix and enable `useUnknownInCatchVariables` on all packages (#13375)","author":"devin-ai-integration[bot]","relativeDate":"1 year ago"}]},"domain":"Git Integration","gitSummary":"Implement pagination for GitHub repositories\nImprove GitHub error messages\nFix and enable useUnknownInCatchVariables","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"GitlabAppService","type":"service","lineCount":336,"gitActivity":{"commits":1,"authors":1,"churn":1,"recentCommits":[{"hash":"43c4b82352","message":"feat: gitlab integration (#16633)","author":"Javier Rengel Jiménez","relativeDate":"5 months ago"}]},"domain":"Git Integration","gitSummary":"Implement GitLab integration\nAdd GitLab client functionality\nCreate GitLab App service","healthSummary":"Low coupling (3 edges), stable — minimal activity"},{"id":"GroupService","type":"service","lineCount":414,"gitActivity":{"commits":15,"authors":8,"churn":2,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"2b7007e319","message":"fix: migrate project access to new endpoints (#16570)","author":"Javier Rengel Jiménez","relativeDate":"6 months ago"},{"hash":"61f874637f","message":"feat: add group service enablement check with config integration (#15842)","author":"Irakli Janiashvili","relativeDate":"7 months ago"}]},"domain":"Roles & Permissions","gitSummary":"Bump prettier and organize imports\nMigrate project access to new endpoints\nAdd group service enablement check","healthSummary":"Low coupling (4 edges), stable — manageable"},{"id":"HealthService","type":"service","lineCount":257,"gitActivity":{"commits":75,"authors":16,"churn":19,"recentCommits":[{"hash":"022481bae0","message":"feat: add dashboard tile and tab limits with configuration (#19791)","author":"Jose Rego","relativeDate":"8 days ago"},{"hash":"ec3ac3c3b4","message":"feat: configure help menu icon behavior (#19731)","author":"agha4to","relativeDate":"9 days ago"},{"hash":"83205d8079","message":"feat: configure signup URL (#19602)","author":"agha4to","relativeDate":"2 weeks ago"}]},"domain":"Infrastructure","gitSummary":"Add dashboard tile and tab limits\nConfigure help menu icon behavior\nConfigure signup URL","healthSummary":"Hot spot: low coupling but extreme churn (19)\n16 authors, 75 commits — high activity risk"},{"id":"LightdashAnalyticsService","type":"service","lineCount":68,"gitActivity":{"commits":2,"authors":1,"churn":1,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"f411becc9d","message":"chore: add deprecation notice to legacy results endpoints (#14123)","author":"Bruno Almeida","relativeDate":"11 months ago"}]},"domain":"AI & Analytics","gitSummary":"Bump prettier and organize imports\nAdd deprecation notice to legacy results\nTrack analytics events","healthSummary":"Low coupling (4 edges), stable — minimal risk"},{"id":"MetricsExplorerService","type":"service","lineCount":371,"gitActivity":{"commits":41,"authors":7,"churn":8,"recentCommits":[{"hash":"fe9df9ed4f","message":"fix: default time dimension selection for metrics on canvas (#20060)","author":"Giorgi Bagdavadze","relativeDate":"23 hours ago"},{"hash":"6c3af36fb7","message":"refactor: remove deprecated metrics explorer query endpoint (#20053)","author":"Giorgi Bagdavadze","relativeDate":"26 hours ago"},{"hash":"d913502224","message":"feat: add rolling days comparison option to metrics explorer (#19959)","author":"Giorgi Bagdavadze","relativeDate":"2 days ago"}]},"domain":"Explores","gitSummary":"Fix default time dimension for canvas metrics\nRemove deprecated query endpoint\nAdd rolling days comparison option","healthSummary":"Moderate coupling (5 edges) with churn (8)\n7 authors — manageable but watch for growth"},{"id":"NotificationService","type":"service","domain":"Notifications","healthSummary":"Low coupling, no code — likely interface, low risk"},{"id":"OauthService","type":"service","lineCount":124,"domain":"User Auth","healthSummary":"Low coupling (4 edges), stable — minimal risk"},{"id":"OrganizationService","type":"service","lineCount":762,"gitActivity":{"commits":66,"authors":14,"churn":5,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"9db17776dc","message":"fix(backend): allow for filtering users with google refresh token (#19161)","author":"Bruno Almeida","relativeDate":"5 weeks ago"},{"hash":"11ab833e8a","message":"refactor: consolidate NotExistsError and NotFoundError (#19093)","author":"Giorgi Bagdavadze","relativeDate":"6 weeks ago"}]},"domain":"Organizations","gitSummary":"Bump prettier and organize imports\nAllow filtering users with Google tokens\nReassign scheduled deliveries on user delete","healthSummary":"Large (762 lines) with coupling (9 edges)\n14 authors — coordination complexity but stable"},{"id":"PermissionsService","type":"service","lineCount":90,"gitActivity":{"commits":7,"authors":3,"churn":7,"recentCommits":[{"hash":"315f897caa","message":"feat: add stricter embed chart permissions (#18022)","author":"Steve Gardner","relativeDate":"3 months ago"},{"hash":"d50de3baf8","message":"feat: support chart type jwt tokens (#17615)","author":"Javier Rengel Jiménez","relativeDate":"3 months ago"},{"hash":"38edc6bde4","message":"feat: add charts to embedding table (#17596)","author":"Steve Gardner","relativeDate":"3 months ago"}]},"domain":"Roles & Permissions","gitSummary":"Add stricter embed chart permissions\nSupport chart type JWT tokens\nAdd charts to embedding table","healthSummary":"Low coupling (3 edges) but high churn (7)\n3 authors — active security work, watch closely"},{"id":"PersonalAccessTokenService","type":"service","lineCount":157,"gitActivity":{"commits":8,"authors":5,"churn":1,"recentCommits":[{"hash":"70dde7182b","message":"fix: validate pat expiration when on dst transition (#17276)","author":"João Viana","relativeDate":"4 months ago"},{"hash":"d3be60ba91","message":"feat: limit personal access token's access and expiration time (#12473)","author":"Jose Rego","relativeDate":"1 year, 3 months ago"},{"hash":"f8ad8d4662","message":"feat: allow to rotate personal access token (#12411)","author":"Jose Rego","relativeDate":"1 year, 3 months ago"}]},"domain":"User Auth","gitSummary":"Validate PAT expiration on DST transition\nLimit PAT access and expiration time\nAllow rotating personal access tokens","healthSummary":"Low coupling (2 edges), stable — minimal risk"},{"id":"PinningService","type":"service","lineCount":147,"gitActivity":{"commits":13,"authors":8,"churn":1,"recentCommits":[{"hash":"1aee92d349","message":"feat: check for inheritance chain space access (#19937)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"35e433dcdc","message":"fix: remove n+1 query by fetching user access from multiple spaces (#10350)","author":"Jose Rego","relativeDate":"1 year, 8 months ago"},{"hash":"67101488a0","message":"chore: introduce BaseService (#9672)","author":"Filipe Dobreira","relativeDate":"1 year, 10 months ago"}]},"domain":"Content","gitSummary":"Check for inheritance chain space access\nRemove n+1 query for space access\nIntroduce BaseService pattern","healthSummary":"Moderate coupling (8 edges) but stable\nSmall footprint (147 lines) — low risk"},{"id":"PivotTableService","type":"service","lineCount":314,"gitActivity":{"commits":8,"authors":5,"churn":7,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"d1f7024627","message":"fix: replace logger.warning with logger.warn method (#19380)","author":"Irakli Janiashvili","relativeDate":"4 weeks ago"},{"hash":"a7249ac540","message":"fix: add error handling when deleting local files (#19275)","author":"Jose Rego","relativeDate":"4 weeks ago"}]},"domain":"Explores","gitSummary":"Bump prettier and organize imports\nReplace logger.warning with logger.warn\nAdd error handling for local file deletes","healthSummary":"Low coupling (4 edges) with moderate churn (7)\n5 authors — manageable"},{"id":"ProjectCompileLogService","type":"service","lineCount":98,"gitActivity":{"commits":1,"authors":1,"churn":1,"recentCommits":[{"hash":"4353a812bc","message":"feat(backend): project compile log model, service and controller (#17577)","author":"Tatiana Inama","relativeDate":"3 months ago"}]},"domain":"Projects","gitSummary":"Create project compile log service\nAdd compile log tracking functionality\nStore compilation error logs","healthSummary":"Low coupling (2 edges), stable — minimal risk"},{"id":"ProjectParametersService","type":"service","lineCount":71,"gitActivity":{"commits":4,"authors":2,"churn":3,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"a075a3e8f3","message":"feat: add model-level parameters to project parameters list (#16418)","author":"Yegor Borisenco","relativeDate":"6 months ago"},{"hash":"a707f3187b","message":"feat: project parameters api (#16369)","author":"Yegor Borisenco","relativeDate":"6 months ago"}]},"domain":"Projects","gitSummary":"Bump prettier and organize imports\nAdd model-level parameters to list\nCreate project parameters API","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"ProjectService","type":"service","lineCount":7206,"gitActivity":{"commits":510,"authors":27,"churn":60,"recentCommits":[{"hash":"6c3af36fb7","message":"refactor: remove deprecated metrics explorer query endpoint (#20053)","author":"Giorgi Bagdavadze","relativeDate":"26 hours ago"},{"hash":"205f4e4124","message":"feat: add conditional inheritance chain check to model and fix all calls (#19947)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"1aee92d349","message":"feat: check for inheritance chain space access (#19937)","author":"Bruno Almeida","relativeDate":"3 days ago"}]},"domain":"Projects","gitSummary":"Remove deprecated metrics explorer endpoint\nAdd conditional inheritance chain check\nCheck for inheritance chain space access","healthSummary":"Critical hot spot: 49 edges, 7206 lines, 60 churn\n27 authors, 510 commits — extreme coupling, coordination nightmare"},{"id":"PromoteService","type":"service","lineCount":1556,"gitActivity":{"commits":23,"authors":9,"churn":5,"recentCommits":[{"hash":"205f4e4124","message":"feat: add conditional inheritance chain check to model and fix all calls (#19947)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"1aee92d349","message":"feat: check for inheritance chain space access (#19937)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"27f878af03","message":"chore: handle inherit/isPrivate during space creation (#19928)","author":"Lukas Spiss","relativeDate":"4 days ago"}]},"domain":"Content","gitSummary":"Add conditional inheritance chain check\nCheck for inheritance chain space access\nHandle inherit/isPrivate during space creation","healthSummary":"Moderate coupling (8 edges), large (1556 lines)\nStable — complex but not risky"},{"id":"RenameService","type":"service","lineCount":785,"gitActivity":{"commits":10,"authors":5,"churn":4,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"11ab833e8a","message":"refactor: consolidate NotExistsError and NotFoundError (#19093)","author":"Giorgi Bagdavadze","relativeDate":"6 weeks ago"},{"hash":"0d5c02f87a","message":"fix: custom metric sql templates and filters not updated on rename (#18146)","author":"Tatiana Inama","relativeDate":"3 months ago"}]},"domain":"Content","gitSummary":"Bump prettier and organize imports\nConsolidate NotExistsError and NotFoundError\nFix custom metric SQL on rename","healthSummary":"Moderate coupling (6 edges), large (785 lines)\nStable — complex but manageable"},{"id":"RolesService","type":"service","lineCount":1010,"gitActivity":{"commits":12,"authors":4,"churn":12,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"88a6b62f87","message":"fix: add descriptive error messages for permission failures (#19332)","author":"Javier Rengel Jiménez","relativeDate":"4 weeks ago"},{"hash":"83acbda277","message":"perf: wrap getAllByOrganizationUuid calls with Sentry transactions (#18652)","author":"Javier Rengel Jiménez","relativeDate":"9 weeks ago"}]},"domain":"Roles & Permissions","gitSummary":"Bump prettier and organize imports\nAdd descriptive permission error messages\nWrap getAllByOrganizationUuid with Sentry","healthSummary":"Large hot spot: 9 edges, 1010 lines, 12 churn\n4 authors — high coupling with active churn"},{"id":"SavedChartService","type":"service","domain":"Saved Charts","healthSummary":"High coupling (20 edges) but no code\nLikely interface/proxy — monitor dependencies"},{"id":"SavedSqlService","type":"service","lineCount":614,"gitActivity":{"commits":26,"authors":7,"churn":2,"recentCommits":[{"hash":"205f4e4124","message":"feat: add conditional inheritance chain check to model and fix all calls (#19947)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"05e09a723c","message":"feat: resource bulk actions - move to another space (#14704)","author":"Irakli Janiashvili","relativeDate":"9 months ago"}]},"domain":"SQL Runner","gitSummary":"Add conditional inheritance chain check\nBump prettier and organize imports\nAdd bulk move to another space","healthSummary":"Moderate coupling (8 edges), stable — manageable"},{"id":"SchedulerService","type":"service","lineCount":1481,"gitActivity":{"commits":60,"authors":15,"churn":21,"recentCommits":[{"hash":"205f4e4124","message":"feat: add conditional inheritance chain check to model and fix all calls (#19947)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"fd8617718c","message":"feat: allow editors to send scheduled deliveries they didn't create (#19929)","author":"Javier Rengel Jiménez","relativeDate":"4 days ago"},{"hash":"e37376f95e","message":"feat: add Google Sheets scope error handling with re-authentication UI (#19882)","author":"Javier Rengel Jiménez","relativeDate":"5 days ago"}]},"domain":"Scheduling","gitSummary":"Add conditional inheritance chain check\nAllow editors to send others' deliveries\nAdd Google Sheets scope error handling","healthSummary":"Hot spot: 16 edges, 1481 lines, 21 churn\n15 authors — high coupling with active coordination burden"},{"id":"SearchService","type":"service","lineCount":267,"gitActivity":{"commits":29,"authors":9,"churn":3,"recentCommits":[{"hash":"1aee92d349","message":"feat: check for inheritance chain space access (#19937)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"83b413d4fe","message":"chore: track search on ai vs omnibar (#17478)","author":"João Viana","relativeDate":"4 months ago"}]},"domain":"Search","gitSummary":"Check for inheritance chain space access\nBump prettier and organize imports\nTrack search source (AI vs omnibar)","healthSummary":"Moderate coupling (6 edges), stable — manageable"},{"id":"ShareService","type":"service","lineCount":99,"gitActivity":{"commits":6,"authors":5,"churn":0,"recentCommits":[{"hash":"67101488a0","message":"chore: introduce BaseService (#9672)","author":"Filipe Dobreira","relativeDate":"1 year, 10 months ago"},{"hash":"2ae2f19057","message":"fix: analytics dependency injection (#9176)","author":"Jose Rego","relativeDate":"1 year, 11 months ago"},{"hash":"d0f328e5e6","message":"refactor: rename type dependencies (#9184)","author":"Jogeshwar Singh","relativeDate":"1 year, 11 months ago"}]},"domain":"Content","gitSummary":"Introduce BaseService pattern\nFix analytics dependency injection\nRename type dependencies","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"SlackIntegrationService","type":"service","lineCount":178,"gitActivity":{"commits":13,"authors":6,"churn":3,"recentCommits":[{"hash":"6156faf114","message":"feat: add project filtering for Slack multi-agent channel (#19456)","author":"Irakli Janiashvili","relativeDate":"3 weeks ago"},{"hash":"290d991737","message":"feat: use db cache for slack channel fetching (#18660)","author":"João Viana","relativeDate":"8 weeks ago"},{"hash":"4694c1a284","message":"feat: new slack channel selector component (#18492)","author":"Irakli Janiashvili","relativeDate":"9 weeks ago"}]},"domain":"Slack","gitSummary":"Add project filtering for Slack channel\nUse database cache for Slack channels\nAdd new channel selector component","healthSummary":"Low coupling (4 edges), stable — minimal risk"},{"id":"SlackService","type":"service","lineCount":35,"gitActivity":{"commits":3,"authors":2,"churn":1,"recentCommits":[{"hash":"0f826d692b","message":"fix: slack client listener initialization (#16439)","author":"Irakli Janiashvili","relativeDate":"6 months ago"},{"hash":"3e719303f2","message":"chore: slackbot improvements (#3951)","author":"Javier Rengel Jiménez","relativeDate":"3 years, 2 months ago"},{"hash":"3c712b20c5","message":"feat: share in slack unfurl (#3852)","author":"Javier Rengel Jiménez","relativeDate":"3 years, 2 months ago"}]},"domain":"Slack","gitSummary":"Fix Slack client listener initialization\nImprove Slackbot functionality\nAdd share in Slack unfurl","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"SpacePermissionService","type":"service","domain":"Spaces","healthSummary":"Low coupling, no code — likely interface, low risk"},{"id":"SpaceService","type":"service","lineCount":762,"gitActivity":{"commits":49,"authors":14,"churn":6,"recentCommits":[{"hash":"d18da7f3c7","message":"feat: implement `space.inherit_parent_permissions` update functionality (#19985)","author":"Lukas Spiss","relativeDate":"2 days ago"},{"hash":"205f4e4124","message":"feat: add conditional inheritance chain check to model and fix all calls (#19947)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"1aee92d349","message":"feat: check for inheritance chain space access (#19937)","author":"Bruno Almeida","relativeDate":"3 days ago"}]},"domain":"Spaces","gitSummary":"Implement inherit_parent_permissions update\nAdd conditional inheritance chain check\nCheck for inheritance chain space access","healthSummary":"Moderate coupling (9 edges), large (762 lines)\n14 authors — coordination complexity but stable"},{"id":"SpotlightService","type":"service","lineCount":114,"gitActivity":{"commits":3,"authors":3,"churn":0,"recentCommits":[{"hash":"7d49a5afe4","message":"fix: resource org uuid check","author":"Jose Rego","relativeDate":"10 months ago"},{"hash":"5c23a86610","message":"chore: fix prettier organizeImportsSkipDestructiveCodeActions (#13393)","author":"Irakli Janiashvili","relativeDate":"1 year ago"},{"hash":"741731967a","message":"feat: allow curating Spotlight's table (#13355)","author":"João Viana","relativeDate":"1 year, 1 month ago"}]},"domain":"Spotlight","gitSummary":"Fix resource org UUID check\nFix prettier organize imports config\nAllow curating Spotlight's table","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"SshKeyPairService","type":"service","lineCount":22,"gitActivity":{"commits":3,"authors":3,"churn":0,"recentCommits":[{"hash":"67101488a0","message":"chore: introduce BaseService (#9672)","author":"Filipe Dobreira","relativeDate":"1 year, 10 months ago"},{"hash":"d0f328e5e6","message":"refactor: rename type dependencies (#9184)","author":"Jogeshwar Singh","relativeDate":"1 year, 11 months ago"},{"hash":"34e695b086","message":"feat: add ssh keypairs api (stacked 2) (#5616)","author":"Oliver Laslett","relativeDate":"2 years, 8 months ago"}]},"domain":"Infrastructure","gitSummary":"Introduce BaseService pattern\nRename type dependencies\nAdd SSH keypairs API","healthSummary":"Low coupling (2 edges), stable — minimal risk"},{"id":"UnfurlService","type":"service","lineCount":1478,"gitActivity":{"commits":118,"authors":17,"churn":32,"recentCommits":[{"hash":"205f4e4124","message":"feat: add conditional inheritance chain check to model and fix all calls (#19947)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"b0c0c8cfe8","message":"chore: remove legacy unfurl readiness checks (#19763)","author":"Lukas Spiss","relativeDate":"10 days ago"}]},"domain":"Slack","gitSummary":"Add conditional inheritance chain check\nBump prettier and organize imports\nRemove legacy unfurl readiness checks","healthSummary":"Hot spot: 13 edges, 1478 lines, 32 churn\n17 authors — high coupling with extreme churn risk"},{"id":"UserAttributesService","type":"service","lineCount":173,"gitActivity":{"commits":8,"authors":5,"churn":1,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"67101488a0","message":"chore: introduce BaseService (#9672)","author":"Filipe Dobreira","relativeDate":"1 year, 10 months ago"},{"hash":"2ae2f19057","message":"fix: analytics dependency injection (#9176)","author":"Jose Rego","relativeDate":"1 year, 11 months ago"}]},"domain":"User Management","gitSummary":"Bump prettier and organize imports\nIntroduce BaseService pattern\nFix analytics dependency injection","healthSummary":"Low coupling (2 edges), stable — minimal risk"},{"id":"UserService","type":"service","lineCount":2007,"gitActivity":{"commits":129,"authors":18,"churn":9,"recentCommits":[{"hash":"e37376f95e","message":"feat: add Google Sheets scope error handling with re-authentication UI (#19882)","author":"Javier Rengel Jiménez","relativeDate":"5 days ago"},{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"11ab833e8a","message":"refactor: consolidate NotExistsError and NotFoundError (#19093)","author":"Giorgi Bagdavadze","relativeDate":"6 weeks ago"}]},"domain":"User Auth","gitSummary":"Add Google Sheets scope error handling\nBump prettier and organize imports\nConsolidate NotExistsError and NotFoundError","healthSummary":"Critical hot spot: 27 edges, 2007 lines, 9 churn\n18 authors, 129 commits — major coupling bottleneck"},{"id":"ValidationService","type":"service","lineCount":1086,"gitActivity":{"commits":75,"authors":13,"churn":22,"recentCommits":[{"hash":"1aee92d349","message":"feat: check for inheritance chain space access (#19937)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"9e8bde9efb","message":"fix: include charts from dashboards in validation error queries (#19758)","author":"Javier Rengel Jiménez","relativeDate":"10 days ago"}]},"domain":"Validation","gitSummary":"Check for inheritance chain space access\nBump prettier and organize imports\nInclude dashboard charts in validation","healthSummary":"Hot spot: 8 edges, 1086 lines, 22 churn\n13 authors — high churn with coordination burden"},{"id":"AnalyticsModel","type":"model","lineCount":424,"gitActivity":{"commits":20,"authors":7,"churn":1,"recentCommits":[{"hash":"70288f5f44","message":"feat: add unused content dashboard to analytics (#16757)","author":"Javier Rengel Jiménez","relativeDate":"5 months ago"},{"hash":"47c0c5506c","message":"feat: allow embeds to access spaces (#16203)","author":"Steve Gardner","relativeDate":"6 months ago"},{"hash":"872355ee41","message":"fix: download raw usage analytics (#14471)","author":"Javier Rengel Jiménez","relativeDate":"10 months ago"}]},"domain":"AI & Analytics","gitSummary":"Add unused content to analytics dashboard\nAllow embeds to access spaces\nFix raw usage analytics download","healthSummary":"Moderate coupling (6 edges), stable — manageable"},{"id":"ProjectModel","type":"model","lineCount":2797,"gitActivity":{"commits":155,"authors":20,"churn":24,"recentCommits":[{"hash":"f48e943f86","message":"feat: add `inherit_parent_permissions` column to spaces (#19800)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"ee6db0d9fa","message":"feat: add partial compilation mode for fields with errors (#19278)","author":"Javier Rengel Jiménez","relativeDate":"4 weeks ago"},{"hash":"d07f9214ae","message":"feat: add roleUuid to project memberships and improve permission checks (#19247)","author":"Javier Rengel Jiménez","relativeDate":"4 weeks ago"}]},"domain":"Projects","gitSummary":"Add inherit_parent_permissions to spaces\nAdd partial compilation mode for errors\nAdd roleUuid to project memberships","healthSummary":"Critical hot spot: 35 edges, 2797 lines, 24 churn\n20 authors, 155 commits — extreme coupling, major risk"},{"id":"CommentModel","type":"model","lineCount":286,"gitActivity":{"commits":9,"authors":5,"churn":0,"recentCommits":[{"hash":"8ea4500769","message":"chore: re enable prettier plugin to organize imports (#13536)","author":"Irakli Janiashvili","relativeDate":"1 year ago"},{"hash":"3b37c25096","message":"fix: pre/post-process comment content in backend and frontend (#9359)","author":"Filipe Dobreira","relativeDate":"1 year, 11 months ago"},{"hash":"d74fa14b13","message":"feat: notify people in thread without mentions as well (#9261)","author":"João Viana","relativeDate":"1 year, 11 months ago"}]},"domain":"Notifications","gitSummary":"Re-enable prettier organize imports\nPre/post-process comment content properly\nNotify people in thread without mentions","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"DashboardModel","type":"model","lineCount":1431,"gitActivity":{"commits":90,"authors":15,"churn":7,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"6e7450d488","message":"fix: guard undefined with optional chaining (#19197)","author":"Yegor Borisenco","relativeDate":"5 weeks ago"},{"hash":"bb5f99377c","message":"feat: add divider option for dashboard heading tiles (#18966)","author":"Giorgi Bagdavadze","relativeDate":"7 weeks ago"}]},"domain":"Dashboards","gitSummary":"Bump prettier and organize imports\nGuard undefined with optional chaining\nAdd divider option for heading tiles","healthSummary":"Hot spot: 18 edges, 1431 lines, 7 churn\n15 authors — high coupling with coordination burden"},{"id":"FeatureFlagModel","type":"model","lineCount":228,"gitActivity":{"commits":25,"authors":9,"churn":20,"recentCommits":[{"hash":"239153a729","message":"refactor: remove MetricExploreModalV1 and recharts dependency (#20018)","author":"João Viana","relativeDate":"2 days ago"},{"hash":"d10637cbac","message":"chore: add `NESTED_SPACES_PERMISSIONS_ENABLED` feature flag (#19815)","author":"Lukas Spiss","relativeDate":"9 days ago"},{"hash":"b0c0c8cfe8","message":"chore: remove legacy unfurl readiness checks (#19763)","author":"Lukas Spiss","relativeDate":"10 days ago"}]},"domain":"Feature Flags","gitSummary":"Remove MetricExploreModalV1 and recharts\nAdd nested spaces permissions flag\nRemove legacy unfurl readiness checks","healthSummary":"Hot spot: 21 edges, high churn (20)\n9 authors — extreme coupling with active churn risk"},{"id":"NotificationsModel","type":"model","lineCount":132,"gitActivity":{"commits":6,"authors":4,"churn":1,"recentCommits":[{"hash":"acaf567cf2","message":"feat(backend): add heading tile type for dashboards (#18807)","author":"Giorgi Bagdavadze","relativeDate":"8 weeks ago"},{"hash":"01e8e7f5ad","message":"feat: add space access to charts and dashboards + move space access to casl (#9226)","author":"Shifan Gu","relativeDate":"1 year, 11 months ago"},{"hash":"d74fa14b13","message":"feat: notify people in thread without mentions as well (#9261)","author":"João Viana","relativeDate":"1 year, 11 months ago"}]},"domain":"Notifications","gitSummary":"Add heading tile type for dashboards\nAdd space access to charts and dashboards\nNotify people in thread without mentions","healthSummary":"Low coupling (2 edges), stable — minimal risk"},{"id":"SpaceModel","type":"model","lineCount":2803,"gitActivity":{"commits":87,"authors":12,"churn":12,"recentCommits":[{"hash":"d18da7f3c7","message":"feat: implement `space.inherit_parent_permissions` update functionality (#19985)","author":"Lukas Spiss","relativeDate":"2 days ago"},{"hash":"7decf44c25","message":"fix: getEffectiveSpaceAccess always adding org/project permissions when child had inherit set to true (#19971)","author":"Bruno Almeida","relativeDate":"3 days ago"},{"hash":"205f4e4124","message":"feat: add conditional inheritance chain check to model and fix all calls (#19947)","author":"Bruno Almeida","relativeDate":"3 days ago"}]},"domain":"Spaces","gitSummary":"Implement inherit_parent_permissions update\nFix getEffectiveSpaceAccess inheritance logic\nAdd conditional inheritance chain check","healthSummary":"Critical hot spot: 19 edges, 2803 lines, 12 churn\n12 authors — extreme size with high coupling"},{"id":"UserModel","type":"model","lineCount":1070,"gitActivity":{"commits":78,"authors":13,"churn":10,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"2b090ca7a0","message":"feat: auto-verify emails for SCIM users when email is updated (#19362)","author":"Javier Rengel Jiménez","relativeDate":"4 weeks ago"},{"hash":"11ab833e8a","message":"refactor: consolidate NotExistsError and NotFoundError (#19093)","author":"Giorgi Bagdavadze","relativeDate":"6 weeks ago"}]},"domain":"User Auth","gitSummary":"Bump prettier and organize imports\nAuto-verify emails for SCIM users\nConsolidate NotExistsError and NotFoundError","healthSummary":"Hot spot: 16 edges, 1070 lines, 10 churn\n13 authors — high coupling with active coordination"},{"id":"DownloadFileModel","type":"model","lineCount":141,"gitActivity":{"commits":5,"authors":4,"churn":0,"recentCommits":[{"hash":"6b15476110","message":"chore: remove semantic viewer types (#15567)","author":"magnew","relativeDate":"8 months ago"},{"hash":"11c099f5f1","message":"chore: capture S3Error when interacting with it (#13998)","author":"João Viana","relativeDate":"11 months ago"},{"hash":"4de4159900","message":"feat: streaming semantic layer (#11105)","author":"Javier Rengel Jiménez","relativeDate":"1 year, 6 months ago"}]},"domain":"Scheduling","gitSummary":"Remove semantic viewer types\nCapture S3Error when interacting with S3\nAdd streaming semantic layer support","healthSummary":"Moderate coupling (6 edges), stable — manageable"},{"id":"SavedChartModel","type":"model","lineCount":1783,"gitActivity":{"commits":122,"authors":15,"churn":15,"recentCommits":[{"hash":"f0b2b92280","message":"perf: optimize chart query to prevent cartesian product explosion (#19943)","author":"Javier Rengel Jiménez","relativeDate":"3 days ago"},{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"f76775c86f","message":"chore: add db + saved chart persistence for pop additional metrics (#19696)","author":"João Viana","relativeDate":"10 days ago"}]},"domain":"Saved Charts","gitSummary":"Optimize chart query to prevent cartesian join\nBump prettier and organize imports\nAdd PoP additional metrics persistence","healthSummary":"Hot spot: 18 edges, 1783 lines, 15 churn\n15 authors — high coupling with active coordination"},{"id":"SavedSqlModel","type":"model","lineCount":389,"gitActivity":{"commits":15,"authors":5,"churn":1,"recentCommits":[{"hash":"dfdb26fdba","message":"feat: add SQL charts as code API endpoints (#18643)","author":"Javier Rengel Jiménez","relativeDate":"9 weeks ago"},{"hash":"05e09a723c","message":"feat: resource bulk actions - move to another space (#14704)","author":"Irakli Janiashvili","relativeDate":"9 months ago"},{"hash":"4849c53a62","message":"chore: remove duplicate viz config type (#12101)","author":"magnew","relativeDate":"1 year, 3 months ago"}]},"domain":"SQL Runner","gitSummary":"Add SQL charts as code API endpoints\nAdd bulk move to another space\nRemove duplicate viz config type","healthSummary":"Low coupling (4 edges), stable — minimal risk"},{"id":"S3Client","type":"client","domain":"Infrastructure","healthSummary":"Moderate coupling (6 edges), no code — interface, low risk"},{"id":"SchedulerClient","type":"client","domain":"Scheduling","healthSummary":"High coupling (12 edges), no code\nInterface dependency hub — monitor changes"},{"id":"CatalogModel","type":"model","lineCount":1778,"gitActivity":{"commits":76,"authors":8,"churn":22,"recentCommits":[{"hash":"89d1f98369","message":"feat: prevent deletion of YAML-defined metric tree edges (#19932)","author":"Tatiana Inama","relativeDate":"4 days ago"},{"hash":"72eba278b9","message":"refactor: extract YAML metric tree edge validation logic + tests (#19892)","author":"Tatiana Inama","relativeDate":"5 days ago"},{"hash":"014719b51a","message":"feat: introduce drivers in models to define relationships in canvas (#19840)","author":"Tatiana Inama","relativeDate":"5 days ago"}]},"domain":"Catalog","gitSummary":"Prevent deletion of YAML metric edges\nExtract YAML metric edge validation logic\nIntroduce drivers for canvas relationships","healthSummary":"Hot spot: 7 edges, 1778 lines, 22 churn\n8 authors — large with active churn burden"},{"id":"PinnedListModel","type":"model","lineCount":217,"gitActivity":{"commits":8,"authors":5,"churn":0,"recentCommits":[{"hash":"0706a0e080","message":"fix: fix some ANyTypes across our codebase (#13406)","author":"Javier Rengel Jiménez","relativeDate":"1 year ago"},{"hash":"3d04a286ff","message":"chore: Replace all any types with AnyType (#13376)","author":"devin-ai-integration[bot]","relativeDate":"1 year ago"},{"hash":"d0f328e5e6","message":"refactor: rename type dependencies (#9184)","author":"Jogeshwar Singh","relativeDate":"1 year, 11 months ago"}]},"domain":"Content","gitSummary":"Fix AnyType usage across codebase\nReplace all any types with AnyType\nRename type dependencies","healthSummary":"Low coupling (4 edges), stable — minimal risk"},{"id":"SchedulerModel","type":"model","domain":"Scheduling","healthSummary":"Low coupling (4 edges), no code — interface, low risk"},{"id":"SlackClient","type":"client","domain":"Slack","healthSummary":"Moderate coupling (7 edges), no code — interface, low risk"},{"id":"GithubAppInstallationsModel","type":"model","domain":"Git Integration","healthSummary":"Low coupling (2 edges), no code — minimal risk"},{"id":"GitlabAppInstallationsModel","type":"model","domain":"Git Integration","healthSummary":"Minimal coupling (1 edge), no code — low risk"},{"id":"GroupsModel","type":"model","lineCount":686,"gitActivity":{"commits":31,"authors":11,"churn":4,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"11ab833e8a","message":"refactor: consolidate NotExistsError and NotFoundError (#19093)","author":"Giorgi Bagdavadze","relativeDate":"6 weeks ago"},{"hash":"17c6bcb22c","message":"feat: remove project access and group memberships when deactivating SCIM users (#17494)","author":"Jose Rego","relativeDate":"4 months ago"}]},"domain":"Roles & Permissions","gitSummary":"Bump prettier and organize imports\nConsolidate NotExistsError and NotFoundError\nRemove access on SCIM user deactivation","healthSummary":"Moderate coupling (8 edges), large (686 lines)\n11 authors — coordination complexity but stable"},{"id":"MigrationModel","type":"model","lineCount":24,"gitActivity":{"commits":2,"authors":2,"churn":0,"recentCommits":[{"hash":"3b3bea464e","message":"chore: don't throw error for out of sync migrations (#10293)","author":"João Viana","relativeDate":"1 year, 8 months ago"},{"hash":"c8ac9daea4","message":"refactor: add migration model (#9436)","author":"Jose Rego","relativeDate":"1 year, 11 months ago"}]},"domain":"Infrastructure","gitSummary":"Don't throw error for out-of-sync migrations\nAdd migration model for tracking\nCreate migration tracking system","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"OrganizationModel","type":"model","lineCount":504,"gitActivity":{"commits":20,"authors":8,"churn":2,"recentCommits":[{"hash":"0806f1d06e","message":"feat: dark mode support (#18365)","author":"Tatiana Inama","relativeDate":"2 months ago"},{"hash":"28652c1be2","message":"chore: add way to try agent (#17412)","author":"João Viana","relativeDate":"4 months ago"},{"hash":"df54efb8c5","message":"feat: add updateSetup config for API key and dbt token updates (#15710)","author":"Javier Rengel Jiménez","relativeDate":"7 months ago"}]},"domain":"Organizations","gitSummary":"Add dark mode support\nAdd way to try Agent feature\nAdd updateSetup config for tokens","healthSummary":"Moderate coupling (8 edges), stable — manageable"},{"id":"OauthModel","type":"model","domain":"User Auth","healthSummary":"Minimal coupling (1 edge), no code — low risk"},{"id":"OnboardingModel","type":"model","lineCount":66,"gitActivity":{"commits":5,"authors":4,"churn":1,"recentCommits":[{"hash":"11ab833e8a","message":"refactor: consolidate NotExistsError and NotFoundError (#19093)","author":"Giorgi Bagdavadze","relativeDate":"6 weeks ago"},{"hash":"d0f328e5e6","message":"refactor: rename type dependencies (#9184)","author":"Jogeshwar Singh","relativeDate":"1 year, 11 months ago"},{"hash":"3741253388","message":"chore: rename common (#2158)","author":"Oliver Laslett","relativeDate":"3 years, 9 months ago"}]},"domain":"User Auth","gitSummary":"Consolidate NotExistsError and NotFoundError\nRename type dependencies\nRename common package","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"OrganizationAllowedEmailDomainsModel","type":"model","lineCount":130,"gitActivity":{"commits":5,"authors":2,"churn":0,"recentCommits":[{"hash":"4947846cf4","message":"fix: allowed email domain project access updates (#10172)","author":"Jose Rego","relativeDate":"1 year, 9 months ago"},{"hash":"d0f328e5e6","message":"refactor: rename type dependencies (#9184)","author":"Jogeshwar Singh","relativeDate":"1 year, 11 months ago"},{"hash":"df2d9ebba5","message":"feat: allow email domain projects roles (#6086)","author":"Jose Rego","relativeDate":"2 years, 7 months ago"}]},"domain":"Organizations","gitSummary":"Fix allowed email domain access updates\nRename type dependencies\nAdd project roles for email domains","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"OrganizationMemberProfileModel","type":"model","lineCount":525,"gitActivity":{"commits":18,"authors":8,"churn":2,"recentCommits":[{"hash":"9db17776dc","message":"fix(backend): allow for filtering users with google refresh token (#19161)","author":"Bruno Almeida","relativeDate":"5 weeks ago"},{"hash":"931b7300b8","message":"fix: apply custom role abilities to user (#16456)","author":"Javier Rengel Jiménez","relativeDate":"6 months ago"},{"hash":"127e799d03","message":"feat: add get org member by email endpoint (#13673)","author":"Bruno Almeida","relativeDate":"12 months ago"}]},"domain":"Organizations","gitSummary":"Allow filtering users with Google tokens\nApply custom role abilities to user\nAdd get org member by email endpoint","healthSummary":"Low coupling (3 edges), large (525 lines)\nStable — complex but not risky"},{"id":"PersonalAccessTokenModel","type":"model","domain":"User Auth","healthSummary":"Low coupling (3 edges), no code — minimal risk"},{"id":"ResourceViewItemModel","type":"model","lineCount":370,"gitActivity":{"commits":14,"authors":11,"churn":0,"recentCommits":[{"hash":"5f2c07836e","message":"fix: get all spaces query (#14461)","author":"Jose Rego","relativeDate":"10 months ago"},{"hash":"63813659db","message":"feat: expose path for space resource in the api (#14441)","author":"Irakli Janiashvili","relativeDate":"10 months ago"},{"hash":"f703123272","message":"feat: nested spaces (backend) (#14285)","author":"João Viana","relativeDate":"10 months ago"}]},"domain":"Content","gitSummary":"Fix get all spaces query\nExpose path for space resource in API\nAdd nested spaces backend support","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"ContentModel","type":"model","lineCount":112,"gitActivity":{"commits":8,"authors":6,"churn":0,"recentCommits":[{"hash":"2f24568523","message":"chore: remove semantic viewer services + endpoints (#15557)","author":"magnew","relativeDate":"8 months ago"},{"hash":"05e09a723c","message":"feat: resource bulk actions - move to another space (#14704)","author":"Irakli Janiashvili","relativeDate":"9 months ago"},{"hash":"2521e61386","message":"feat: order content by rank (#14533)","author":"João Viana","relativeDate":"10 months ago"}]},"domain":"Content","gitSummary":"Remove semantic viewer services\nAdd bulk move to another space\nOrder content by rank field","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"EmailModel","type":"model","lineCount":206,"gitActivity":{"commits":8,"authors":4,"churn":1,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"3a95396ffb","message":"refactor: rename entity files to camelCase (#8562)","author":"iMac","relativeDate":"2 years, 1 month ago"},{"hash":"5b1ec423d5","message":"chore: add verify event (#4787)","author":"Jose Rego","relativeDate":"2 years, 11 months ago"}]},"domain":"Infrastructure","gitSummary":"Bump prettier and organize imports\nRename entity files to camelCase\nAdd verify event tracking","healthSummary":"Moderate coupling (5 edges), stable — manageable"},{"id":"JobModel","type":"model","lineCount":204,"gitActivity":{"commits":9,"authors":5,"churn":0,"recentCommits":[{"hash":"35cd889de8","message":"chore: fix and enable `useUnknownInCatchVariables` on all packages (#13375)","author":"devin-ai-integration[bot]","relativeDate":"1 year ago"},{"hash":"d0f328e5e6","message":"refactor: rename type dependencies (#9184)","author":"Jogeshwar Singh","relativeDate":"1 year, 11 months ago"},{"hash":"e3764dfc8a","message":"fix: dbt compile error message (#3771)","author":"Jose Rego","relativeDate":"3 years, 3 months ago"}]},"domain":"Scheduling","gitSummary":"Fix and enable useUnknownInCatchVariables\nRename type dependencies\nFix dbt compile error message","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"OrganizationWarehouseCredentialsModel","type":"model","lineCount":285,"gitActivity":{"commits":2,"authors":1,"churn":2,"recentCommits":[{"hash":"a8766b5b54","message":"feat: org credentials on CLI (#17673)","author":"Javier Rengel Jiménez","relativeDate":"3 months ago"},{"hash":"541a57b9f7","message":"feat: organizationw warehouse credentials (#17192)","author":"Javier Rengel Jiménez","relativeDate":"4 months ago"}]},"domain":"Organizations","gitSummary":"Add org credentials on CLI\nCreate organization warehouse credentials\nStore org-level warehouse credentials","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"ProjectCompileLogModel","type":"model","lineCount":158,"gitActivity":{"commits":2,"authors":1,"churn":2,"recentCommits":[{"hash":"4353a812bc","message":"feat(backend): project compile log model, service and controller (#17577)","author":"Tatiana Inama","relativeDate":"3 months ago"},{"hash":"5983f3f92e","message":"feat: project compile model (#17550)","author":"Tatiana Inama","relativeDate":"4 months ago"}]},"domain":"Projects","gitSummary":"Add project compile log endpoints\nCreate project compile model\nStore project compilation logs","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"ProjectParametersModel","type":"model","lineCount":167,"gitActivity":{"commits":3,"authors":2,"churn":2,"recentCommits":[{"hash":"a075a3e8f3","message":"feat: add model-level parameters to project parameters list (#16418)","author":"Yegor Borisenco","relativeDate":"6 months ago"},{"hash":"a707f3187b","message":"feat: project parameters api (#16369)","author":"Yegor Borisenco","relativeDate":"6 months ago"},{"hash":"3fcd6b6c5d","message":"feat: lightdash parameters (#15873)","author":"Bruno Almeida","relativeDate":"7 months ago"}]},"domain":"Projects","gitSummary":"Add model-level parameters to list\nCreate project parameters API\nAdd Lightdash parameters support","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"SshKeyPairModel","type":"model","lineCount":48,"gitActivity":{"commits":4,"authors":4,"churn":0,"recentCommits":[{"hash":"a42244b1e3","message":"chore: refactor encryption service to be a util class (#9647)","author":"Jose Rego","relativeDate":"1 year, 10 months ago"},{"hash":"d9e178bc7d","message":"feat: AzureAd OIDC `private_key_jwt` token authentication (#9612)","author":"Filipe Dobreira","relativeDate":"1 year, 10 months ago"},{"hash":"d0f328e5e6","message":"refactor: rename type dependencies (#9184)","author":"Jogeshwar Singh","relativeDate":"1 year, 11 months ago"}]},"domain":"Infrastructure","gitSummary":"Refactor encryption service to util\nAdd AzureAd OIDC token authentication\nRename type dependencies","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"TagsModel","type":"model","lineCount":160,"gitActivity":{"commits":8,"authors":4,"churn":1,"recentCommits":[{"hash":"d4f1f67b2c","message":"fix: Metrics Catalog category filter dropdown missing existing categories (#19538)","author":"Giorgi Bagdavadze","relativeDate":"3 weeks ago"},{"hash":"8ea4500769","message":"chore: re enable prettier plugin to organize imports (#13536)","author":"Irakli Janiashvili","relativeDate":"1 year ago"},{"hash":"15ab1f9e0f","message":"chore: track spotlight curation analytics events (#13423)","author":"João Viana","relativeDate":"1 year ago"}]},"domain":"Catalog","gitSummary":"Fix Metrics Catalog category filter dropdown\nRe-enable prettier organize imports\nTrack Spotlight curation analytics","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"UserAttributesModel","type":"model","lineCount":432,"gitActivity":{"commits":11,"authors":7,"churn":1,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"7423afea35","message":"chore: global eslint no floating promises (#9462)","author":"Irakli Janiashvili","relativeDate":"1 year, 10 months ago"},{"hash":"d0f328e5e6","message":"refactor: rename type dependencies (#9184)","author":"Jogeshwar Singh","relativeDate":"1 year, 11 months ago"}]},"domain":"User Management","gitSummary":"Bump prettier and organize imports\nAdd global eslint no floating promises\nRename type dependencies","healthSummary":"Moderate coupling (8 edges), stable — manageable"},{"id":"UserWarehouseCredentialsModel","type":"model","domain":"Organizations","healthSummary":"Low coupling (3 edges), no code — minimal risk"},{"id":"WarehouseAvailableTablesModel","type":"model","lineCount":144,"gitActivity":{"commits":5,"authors":3,"churn":0,"recentCommits":[{"hash":"aaf03ff84b","message":"fix: no new sessions in trx blocks (#14436)","author":"Oliver Laslett","relativeDate":"10 months ago"},{"hash":"aa424b5f56","message":"fix: sql runner warehouse schema insert in batches (#11870)","author":"Irakli Janiashvili","relativeDate":"1 year, 4 months ago"},{"hash":"2fd15131d5","message":"feat: add partitioning bigquery sql runner (#11576)","author":"Javier Rengel Jiménez","relativeDate":"1 year, 5 months ago"}]},"domain":"Projects","gitSummary":"Prevent new sessions in transaction blocks\nInsert SQL runner schema in batches\nAdd partitioning for BigQuery SQL runner","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"EmailClient","type":"client","lineCount":737,"gitActivity":{"commits":53,"authors":14,"churn":14,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"01a8aa1804","message":"fix: do not run and disable scheduled deliveries when there are no targets (#19495)","author":"Bruno Almeida","relativeDate":"3 weeks ago"},{"hash":"30db081b19","message":"feat: add email notifications for scheduled delivery failures (#18677)","author":"Yegor Borisenco","relativeDate":"8 weeks ago"}]},"domain":"Infrastructure","gitSummary":"Bump prettier and organize imports\nDisable deliveries with no targets\nAdd email notifications for delivery failures","healthSummary":"Low coupling (4 edges), large (737 lines)\nHot churn (14) with 14 authors — active coordination"},{"id":"S3CacheClient","type":"client","domain":"Infrastructure","healthSummary":"Low coupling (2 edges), no code — minimal risk"},{"id":"DownloadAuditModel","type":"model","lineCount":42,"gitActivity":{"commits":1,"authors":1,"churn":1,"recentCommits":[{"hash":"84861714fe","message":"feat: add download audit tracking for file exports (#17553)","author":"Yegor Borisenco","relativeDate":"4 months ago"}]},"domain":"Scheduling","gitSummary":"Add download audit tracking for exports\nCreate download audit model\nTrack file export downloads","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"QueryHistoryModel","type":"model","lineCount":300,"gitActivity":{"commits":9,"authors":5,"churn":4,"recentCommits":[{"hash":"d054daad10","message":"fix: change userUuid type from optional to nullable in query history (#18980)","author":"Javier Rengel Jiménez","relativeDate":"7 weeks ago"},{"hash":"823c210e10","message":"feat: key results cache on userUuid when using warehouse credentials (#18194)","author":"Oliver Laslett","relativeDate":"3 months ago"},{"hash":"fe46b46dcd","message":"fix: format pivoted results (#16641)","author":"Bruno Almeida","relativeDate":"5 months ago"}]},"domain":"Explores","gitSummary":"Change userUuid type to nullable\nKey results cache on userUuid for creds\nFormat pivoted results correctly","healthSummary":"Low coupling (2 edges) with moderate churn (4)\n5 authors — manageable"},{"id":"ResultsFileStorageClient","type":"client","domain":"Infrastructure","healthSummary":"Low coupling (2 edges), no code — minimal risk"},{"id":"GoogleDriveClient","type":"client","domain":"Integrations","healthSummary":"Low coupling (2 edges), no code — minimal risk"},{"id":"SearchModel","type":"model","domain":"Search","healthSummary":"Low coupling (3 edges), no code — minimal risk"},{"id":"ShareModel","type":"model","lineCount":63,"gitActivity":{"commits":4,"authors":4,"churn":0,"recentCommits":[{"hash":"10bc4658f1","message":"fix: handle error when share link does not exist (#12117)","author":"Jose Rego","relativeDate":"1 year, 3 months ago"},{"hash":"d0f328e5e6","message":"refactor: rename type dependencies (#9184)","author":"Jogeshwar Singh","relativeDate":"1 year, 11 months ago"},{"hash":"e743b408fd","message":"fix: remove extra fields from ShareModel (#3996)","author":"Oliver Laslett","relativeDate":"3 years, 2 months ago"}]},"domain":"Content","gitSummary":"Handle error when share link missing\nRename type dependencies\nRemove extra fields from ShareModel","healthSummary":"Low coupling (2 edges), stable — minimal risk"},{"id":"SlackAuthenticationModel","type":"model","lineCount":182,"gitActivity":{"commits":21,"authors":9,"churn":2,"recentCommits":[{"hash":"0f826d692b","message":"fix: slack client listener initialization (#16439)","author":"Irakli Janiashvili","relativeDate":"6 months ago"},{"hash":"5ae3d7553f","message":"fix: Revert \"refactor: move Slack client functionality to service layer\" (#16432)","author":"Irakli Janiashvili","relativeDate":"6 months ago"},{"hash":"4bc43a2264","message":"refactor: move Slack client functionality to service layer (#16254)","author":"Irakli Janiashvili","relativeDate":"6 months ago"}]},"domain":"Slack","gitSummary":"Fix Slack client listener initialization\nRevert Slack client refactor\nMove Slack client to service layer","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"SpacePermissionModel","type":"model","lineCount":343,"gitActivity":{"commits":2,"authors":1,"churn":2,"recentCommits":[{"hash":"d1fa433026","message":"chore: add sentry transaction to (#20069)","author":"Bruno Almeida","relativeDate":"20 hours ago"},{"hash":"ab3365e114","message":"chore(refactor): refactor space access resolution into its own service (#20009)","author":"Bruno Almeida","relativeDate":"20 hours ago"}]},"domain":"Spaces","gitSummary":"Add Sentry transaction tracking\nRefactor space access resolution to service\nImprove space permission resolution","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"InviteLinkModel","type":"model","lineCount":126,"gitActivity":{"commits":17,"authors":8,"churn":2,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"11ab833e8a","message":"refactor: consolidate NotExistsError and NotFoundError (#19093)","author":"Giorgi Bagdavadze","relativeDate":"6 weeks ago"},{"hash":"d0f328e5e6","message":"refactor: rename type dependencies (#9184)","author":"Jogeshwar Singh","relativeDate":"1 year, 11 months ago"}]},"domain":"User Auth","gitSummary":"Bump prettier and organize imports\nConsolidate NotExistsError and NotFoundError\nRename type dependencies","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"OpenIdIdentityModel","type":"model","domain":"User Auth","healthSummary":"Low coupling (3 edges), no code — minimal risk"},{"id":"PasswordResetLinkModel","type":"model","lineCount":97,"gitActivity":{"commits":6,"authors":5,"churn":2,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"11ab833e8a","message":"refactor: consolidate NotExistsError and NotFoundError (#19093)","author":"Giorgi Bagdavadze","relativeDate":"6 weeks ago"},{"hash":"d0f328e5e6","message":"refactor: rename type dependencies (#9184)","author":"Jogeshwar Singh","relativeDate":"1 year, 11 months ago"}]},"domain":"User Auth","gitSummary":"Bump prettier and organize imports\nConsolidate NotExistsError and NotFoundError\nRename type dependencies","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"SessionModel","type":"model","lineCount":19,"gitActivity":{"commits":1,"authors":1,"churn":0,"recentCommits":[{"hash":"180a97cce8","message":"delete organization user","author":"Jose Rego","relativeDate":"4 years, 6 months ago"}]},"domain":"User Auth","gitSummary":"Delete organization user sessions\nCleanup user session data\nHandle session management","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"ValidationModel","type":"model","lineCount":464,"gitActivity":{"commits":26,"authors":6,"churn":5,"recentCommits":[{"hash":"9e8bde9efb","message":"fix: include charts from dashboards in validation error queries (#19758)","author":"Javier Rengel Jiménez","relativeDate":"10 days ago"},{"hash":"684f0eff27","message":"fix: handle additional foreign key constraints in validation error handling (#19433)","author":"Javier Rengel Jiménez","relativeDate":"3 weeks ago"},{"hash":"284012a8a7","message":"fix: prevent race conditions in validation updates with row-level locking (#19061)","author":"Jose Rego","relativeDate":"5 weeks ago"}]},"domain":"Validation","gitSummary":"Include dashboard charts in validation\nHandle foreign key constraints in errors\nPrevent race conditions with row locking","healthSummary":"Minimal coupling (1 edge), large (464 lines)\nModerate churn (5) — complex but manageable"},{"id":"ChangesetModel","type":"model","lineCount":215,"gitActivity":{"commits":8,"authors":2,"churn":8,"recentCommits":[{"hash":"3a699bef93","message":"feat: add API endpoints to revert changes in changesets (#17235)","author":"Giorgi Bagdavadze","relativeDate":"4 months ago"},{"hash":"2b60bf60d2","message":"fix: order changeset changes by creation time (#17256)","author":"Giorgi Bagdavadze","relativeDate":"4 months ago"},{"hash":"19b6f7965c","message":"feat: add ability to revert AI agent proposed changes (#17205)","author":"Giorgi Bagdavadze","relativeDate":"4 months ago"}]},"domain":"Catalog","gitSummary":"Add endpoints to revert changes\nOrder changeset changes by creation time\nAdd ability to revert Agent changes","healthSummary":"Low coupling (3 edges) with hot churn (8)\n2 authors — active development, watch closely"},{"id":"RolesModel","type":"model","lineCount":835,"gitActivity":{"commits":10,"authors":3,"churn":10,"recentCommits":[{"hash":"dd9adf3e98","message":"fix: add unified method for setting user org and project roles in SCIM service (#18255)","author":"Jose Rego","relativeDate":"3 months ago"},{"hash":"34689010a5","message":"feat: add transaction support to RolesModel methods (#18252)","author":"Jose Rego","relativeDate":"3 months ago"},{"hash":"17c6bcb22c","message":"feat: remove project access and group memberships when deactivating SCIM users (#17494)","author":"Jose Rego","relativeDate":"4 months ago"}]},"domain":"Roles & Permissions","gitSummary":"Add unified method for user roles\nAdd transaction support to methods\nRemove access on SCIM user deactivation","healthSummary":"Low coupling (2 edges) with hot churn (10)\n3 authors — active security work, monitor carefully"},{"id":"SpotlightTableConfigModel","type":"model","lineCount":55,"gitActivity":{"commits":2,"authors":2,"churn":0,"recentCommits":[{"hash":"5c23a86610","message":"chore: fix prettier organizeImportsSkipDestructiveCodeActions (#13393)","author":"Irakli Janiashvili","relativeDate":"1 year ago"},{"hash":"741731967a","message":"feat: allow curating Spotlight's table (#13355)","author":"João Viana","relativeDate":"1 year, 1 month ago"}]},"domain":"Spotlight","gitSummary":"Fix prettier organize imports config\nAllow curating Spotlight's table\nStore Spotlight table curation","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"ee/AiAgentAdminController","type":"controller","ee":true,"lineCount":200,"gitActivity":{"commits":7,"authors":5,"churn":7,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"6a5e12ce61","message":"chore: unhide admin API endpoints (#17574)","author":"Giorgi Bagdavadze","relativeDate":"4 months ago"},{"hash":"35b80f5fa6","message":"feat: ai organization settings crud (#17353)","author":"Tatiana Inama","relativeDate":"4 months ago"}]},"domain":"AI & Analytics","gitSummary":"Add JSDoc summaries to all handler methods\nUnhide admin API endpoints\nAdd AI organization settings CRUD","healthSummary":"Low coupling (2 edges) with hot churn (7)\n5 authors — active EE feature development"},{"id":"ee/CustomRolesController","type":"controller","ee":true,"lineCount":207,"gitActivity":{"commits":3,"authors":3,"churn":3,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"26d444e6c9","message":"feat: add assigning scopes to custom roles (#16601)","author":"Steve Gardner","relativeDate":"5 months ago"},{"hash":"667efe54c0","message":"fix: move new role system endpoints to oss (#16563)","author":"Javier Rengel Jiménez","relativeDate":"6 months ago"}]},"domain":"Roles & Permissions","gitSummary":"Add JSDoc summaries to all handler methods\nAdd assigning scopes to custom roles\nMove new role system to open source","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"ee/OrganizationWarehouseCredentialsController","type":"controller","ee":true,"lineCount":193,"gitActivity":{"commits":2,"authors":1,"churn":2,"recentCommits":[{"hash":"a8766b5b54","message":"feat: org credentials on CLI (#17673)","author":"Javier Rengel Jiménez","relativeDate":"3 months ago"},{"hash":"541a57b9f7","message":"feat: organizationw warehouse credentials (#17192)","author":"Javier Rengel Jiménez","relativeDate":"4 months ago"}]},"domain":"Organizations","gitSummary":"Add org credentials on CLI\nCreate organization warehouse credentials\nStore org-level warehouse credentials","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"ee/aiAgentController","type":"controller","ee":true,"lineCount":1114,"gitActivity":{"commits":47,"authors":4,"churn":31,"recentCommits":[{"hash":"707aa22c2d","message":"refactor: move AiAgentService to dedicated directory with documentation (#19394)","author":"Irakli Janiashvili","relativeDate":"4 weeks ago"},{"hash":"2bcb6f42ea","message":"fix: skip Sentry for stream timeout errors in AI agent controller (#19109)","author":"Giorgi Bagdavadze","relativeDate":"6 weeks ago"},{"hash":"88c1381645","message":"feat(backend): list available models and model selection for prompts (#18532)","author":"Giorgi Bagdavadze","relativeDate":"9 weeks ago"}]},"domain":"AI & Analytics","gitSummary":"Move AiAgentService to dedicated directory\nSkip Sentry for stream timeout errors\nAdd model selection for prompts","healthSummary":"Large hot spot: 1114 lines, 31 churn\n4 authors — extreme churn on complex EE feature"},{"id":"ee/aiController","type":"controller","ee":true,"lineCount":178,"gitActivity":{"commits":9,"authors":6,"churn":4,"recentCommits":[{"hash":"3391c5ec08","message":"feat: add AI-powered custom tooltip generator (#19501)","author":"Giorgi Bagdavadze","relativeDate":"3 weeks ago"},{"hash":"ed76d9559b","message":"chore: add generation of table calculation with ambient ai (#18920)","author":"João Viana","relativeDate":"7 weeks ago"},{"hash":"46b0e60642","message":"chore: create generator for chart metadata (#18721)","author":"João Viana","relativeDate":"8 weeks ago"}]},"domain":"AI & Analytics","gitSummary":"Add AI-powered custom tooltip generator\nGenerate table calculations with AI\nCreate chart metadata generator","healthSummary":"Moderate size (178 lines) with churn (4)\n6 authors — active AI feature development"},{"id":"ee/databricksSSOController","type":"controller","ee":true,"lineCount":43,"gitActivity":{"commits":1,"authors":1,"churn":1,"recentCommits":[{"hash":"9bfa021353","message":"feat: databricks oauth (#17745)","author":"Javier Rengel Jiménez","relativeDate":"3 months ago"}]},"domain":"User Auth","gitSummary":"Add Databricks OAuth support\nImplement Databricks SSO authentication\nCreate Databricks SSO controller","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"ee/embedController","type":"controller","ee":true,"lineCount":506,"gitActivity":{"commits":22,"authors":9,"churn":11,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"11cee2936b","message":"feat: add calculate total and subtotals endpoints for embed mode (#19098)","author":"Yegor Borisenco","relativeDate":"6 weeks ago"},{"hash":"4ab85d81f0","message":"fix: get right aggregate on date zoom + subttotals (#18654)","author":"Lightdash Bot","relativeDate":"9 weeks ago"}]},"domain":"Embed","gitSummary":"Add JSDoc summaries to all handler methods\nAdd calculate total endpoints for embed\nFix aggregate on date zoom with subtotals","healthSummary":"Large (506 lines) with hot churn (11)\n9 authors — complex EE feature with active development"},{"id":"ee/scimGroupController","type":"controller","ee":true,"lineCount":216,"gitActivity":{"commits":3,"authors":1,"churn":2,"recentCommits":[{"hash":"440211cfa5","message":"docs: add examples to SCIM API endpoints (#17914)","author":"Jose Rego","relativeDate":"3 months ago"},{"hash":"ca7e0caede","message":"docs: SCIM API endpoints (#17871)","author":"Jose Rego","relativeDate":"3 months ago"},{"hash":"3164fa8817","message":"feat: ee features (#13402)","author":"Jose Rego","relativeDate":"1 year ago"}]},"domain":"Roles & Permissions","gitSummary":"Add examples to SCIM API endpoints\nAdd SCIM API documentation\nCreate SCIM group management","healthSummary":"Low coupling (1 edge), stable — minimal risk"},{"id":"ee/scimOrganizationAccessTokenController","type":"controller","ee":true,"lineCount":187,"gitActivity":{"commits":4,"authors":3,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"056bd51eae","message":"feat: improve service account authentication with CASL abilities (#15354)","author":"Javier Rengel Jiménez","relativeDate":"8 months ago"},{"hash":"708119a7eb","message":"feat: service accounts (#15261)","author":"Javier Rengel Jiménez","relativeDate":"8 months ago"}]},"domain":"User Auth","gitSummary":"Add JSDoc summaries to all handler methods\nImprove service account auth with CASL\nAdd service accounts feature","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"ee/scimRoleController","type":"controller","ee":true,"lineCount":140,"gitActivity":{"commits":4,"authors":1,"churn":4,"recentCommits":[{"hash":"440211cfa5","message":"docs: add examples to SCIM API endpoints (#17914)","author":"Jose Rego","relativeDate":"3 months ago"},{"hash":"fde98c2c12","message":"feat: add pagination to SCIM roles API (#17873)","author":"Jose Rego","relativeDate":"3 months ago"},{"hash":"ca7e0caede","message":"docs: SCIM API endpoints (#17871)","author":"Jose Rego","relativeDate":"3 months ago"}]},"domain":"Roles & Permissions","gitSummary":"Add examples to SCIM API endpoints\nAdd pagination to SCIM roles API\nAdd SCIM API documentation","healthSummary":"Minimal coupling (1 edge) with churn (4)\nSingle author — active SCIM development"},{"id":"ee/scimUserController","type":"controller","ee":true,"lineCount":273,"gitActivity":{"commits":3,"authors":1,"churn":2,"recentCommits":[{"hash":"440211cfa5","message":"docs: add examples to SCIM API endpoints (#17914)","author":"Jose Rego","relativeDate":"3 months ago"},{"hash":"ca7e0caede","message":"docs: SCIM API endpoints (#17871)","author":"Jose Rego","relativeDate":"3 months ago"},{"hash":"3164fa8817","message":"feat: ee features (#13402)","author":"Jose Rego","relativeDate":"1 year ago"}]},"domain":"Roles & Permissions","gitSummary":"Add examples to SCIM API endpoints\nAdd SCIM API documentation\nCreate SCIM user management","healthSummary":"Low coupling (1 edge), large (273 lines)\nStable — complex but not risky"},{"id":"ee/serviceAccountsController","type":"controller","ee":true,"lineCount":119,"gitActivity":{"commits":3,"authors":2,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"056bd51eae","message":"feat: improve service account authentication with CASL abilities (#15354)","author":"Javier Rengel Jiménez","relativeDate":"8 months ago"},{"hash":"708119a7eb","message":"feat: service accounts (#15261)","author":"Javier Rengel Jiménez","relativeDate":"8 months ago"}]},"domain":"User Auth","gitSummary":"Add JSDoc summaries to all handler methods\nImprove service account auth with CASL\nAdd service accounts feature","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"ee/snowflakeController","type":"controller","ee":true,"lineCount":58,"gitActivity":{"commits":2,"authors":2,"churn":1,"recentCommits":[{"hash":"833d32739c","message":"chore: add missing `@summary` jsdoc to handlers (#19839)","author":"Lukas Spiss","relativeDate":"8 days ago"},{"hash":"ed9efedf0c","message":"chore: move snowflake controller to enterprise edition (#15245)","author":"Javier Rengel Jiménez","relativeDate":"8 months ago"}]},"domain":"User Auth","gitSummary":"Add JSDoc summaries to all handler methods\nMove Snowflake controller to enterprise\nCreate Snowflake controller","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"ee/supportController","type":"controller","ee":true,"lineCount":66,"gitActivity":{"commits":1,"authors":1,"churn":0,"recentCommits":[{"hash":"bb08f46efd","message":"chore: support button (#14185)","author":"magnew","relativeDate":"10 months ago"}]},"domain":"Support","gitSummary":"Add support button to UI\nCreate support controller\nImplement support functionality","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"AiAgentAdminService","type":"service","ee":true,"lineCount":164,"gitActivity":{"commits":3,"authors":2,"churn":3,"recentCommits":[{"hash":"b61b55b4d6","message":"feat: add analytics dashboard embed to AI agent admin page (#16894)","author":"Irakli Janiashvili","relativeDate":"5 months ago"},{"hash":"7849182b39","message":"feat: add tooltop bar ai threads filters (#16718)","author":"João Viana","relativeDate":"5 months ago"},{"hash":"b6885c2ee5","message":"chore: add ai agent admin controller (#16691)","author":"João Viana","relativeDate":"5 months ago"}]},"domain":"AI & Analytics","gitSummary":"Add analytics dashboard embed to admin\nAdd AI threads filters to tooltip bar\nCreate AI agent admin controller","healthSummary":"Low coupling (2 edges), stable — minimal risk"},{"id":"AiAgentService","type":"service","ee":true,"lineCount":5960,"gitActivity":{"commits":10,"authors":4,"churn":10,"recentCommits":[{"hash":"d56a7d62bb","message":"fix: ambient ai and fast model (#19986)","author":"Giorgi Bagdavadze","relativeDate":"23 hours ago"},{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"7362ee9476","message":"refactor: rename runMiniMetricQuery to runAsyncQuery and remove redundant params (#19724)","author":"Giorgi Bagdavadze","relativeDate":"11 days ago"}]},"domain":"AI & Analytics","gitSummary":"Fix ambient AI and fast model\nBump prettier and organize imports\nRename runMiniMetricQuery to runAsyncQuery","healthSummary":"Critical hot spot: 21 edges, 5960 lines, 10 churn\n4 authors — extreme size with very high coupling"},{"id":"AiOrganizationSettingsService","type":"service","ee":true,"lineCount":147,"gitActivity":{"commits":6,"authors":3,"churn":6,"recentCommits":[{"hash":"3995beaff1","message":"fix: add organization name to user type in feature flag service (#17805)","author":"Irakli Janiashvili","relativeDate":"3 months ago"},{"hash":"28652c1be2","message":"chore: add way to try agent (#17412)","author":"João Viana","relativeDate":"4 months ago"},{"hash":"e670e2cbde","message":"feat: ai feature visibility defaults to true (#17380)","author":"Tatiana Inama","relativeDate":"4 months ago"}]},"domain":"AI & Analytics","gitSummary":"Add org name to user in feature flag\nAdd way to try Agent feature\nSet AI feature visibility to true","healthSummary":"Moderate coupling (5 edges) with churn (6)\n3 authors — active AI settings development"},{"id":"AiService","type":"service","ee":true,"lineCount":544,"gitActivity":{"commits":32,"authors":9,"churn":8,"recentCommits":[{"hash":"d56a7d62bb","message":"fix: ambient ai and fast model (#19986)","author":"Giorgi Bagdavadze","relativeDate":"23 hours ago"},{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"3391c5ec08","message":"feat: add AI-powered custom tooltip generator (#19501)","author":"Giorgi Bagdavadze","relativeDate":"3 weeks ago"}]},"domain":"AI & Analytics","gitSummary":"Fix ambient AI and fast model\nBump prettier and organize imports\nAdd AI-powered custom tooltip generator","healthSummary":"Moderate coupling (5 edges) with churn (8)\n9 authors — active AI feature coordination"},{"id":"CacheService","type":"service","ee":true,"domain":"Explores","healthSummary":"Low coupling (3 edges), no code — interface, low risk"},{"id":"EmbedService","type":"service","ee":true,"lineCount":1803,"gitActivity":{"commits":54,"authors":9,"churn":27,"recentCommits":[{"hash":"aaa5df0ed1","message":"fix: enable subtotals/totals on SDK + charts (#19925)","author":"João Viana","relativeDate":"4 days ago"},{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"fb839f6903","message":"fix: load embed chart on generate & copy URL action in embed settings (#19397)","author":"João Viana","relativeDate":"3 weeks ago"}]},"domain":"Embed","gitSummary":"Enable subtotals/totals on SDK and charts\nBump prettier and organize imports\nFix load embed chart on generate URL","healthSummary":"Hot spot: 10 edges, 1803 lines, 27 churn\n9 authors — high coupling with extreme churn risk"},{"id":"InstanceConfigurationService","type":"service","ee":true,"lineCount":600,"gitActivity":{"commits":11,"authors":5,"churn":7,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"11ab833e8a","message":"refactor: consolidate NotExistsError and NotFoundError (#19093)","author":"Giorgi Bagdavadze","relativeDate":"6 weeks ago"},{"hash":"38edc6bde4","message":"feat: add charts to embedding table (#17596)","author":"Steve Gardner","relativeDate":"3 months ago"}]},"domain":"Infrastructure","gitSummary":"Bump prettier and organize imports\nConsolidate NotExistsError and NotFoundError\nAdd charts to embedding table","healthSummary":"Moderate coupling (9 edges), large (600 lines)\n5 authors with churn (7) — manageable but watch"},{"id":"McpService","type":"service","ee":true,"lineCount":1658,"gitActivity":{"commits":49,"authors":7,"churn":46,"recentCommits":[{"hash":"724838ca2a","message":"feat: introduce MCP App for ai charts (#19747)","author":"João Viana","relativeDate":"5 days ago"},{"hash":"b1291b28b7","message":"feat: support service account authentication for MCP (#19738)","author":"Javier Rengel Jiménez","relativeDate":"11 days ago"},{"hash":"7362ee9476","message":"refactor: rename runMiniMetricQuery to runAsyncQuery and remove redundant params (#19724)","author":"Giorgi Bagdavadze","relativeDate":"11 days ago"}]},"domain":"MCP","gitSummary":"Introduce MCP App for AI charts\nSupport service account authentication\nRename runMiniMetricQuery to runAsyncQuery","healthSummary":"Hot spot: 9 edges, 1658 lines, 46 churn\n7 authors — extreme churn with high coupling"},{"id":"OrganizationWarehouseCredentialsService","type":"service","ee":true,"lineCount":281,"gitActivity":{"commits":3,"authors":1,"churn":3,"recentCommits":[{"hash":"a8766b5b54","message":"feat: org credentials on CLI (#17673)","author":"Javier Rengel Jiménez","relativeDate":"3 months ago"},{"hash":"6bd8a694d8","message":"feat: organization warehouse credentials form for snowflake (#17223)","author":"Javier Rengel Jiménez","relativeDate":"4 months ago"},{"hash":"541a57b9f7","message":"feat: organizationw warehouse credentials (#17192)","author":"Javier Rengel Jiménez","relativeDate":"4 months ago"}]},"domain":"Organizations","gitSummary":"Add org credentials on CLI\nAdd warehouse credentials form for Snowflake\nCreate organization warehouse credentials","healthSummary":"Low coupling (3 edges), stable — minimal risk"},{"id":"ScimService","type":"service","ee":true,"lineCount":2770,"gitActivity":{"commits":29,"authors":5,"churn":22,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"b19312bae3","message":"feat: delete OpenID identities by email in SCIM service to prevent login conflicts (#19449)","author":"Javier Rengel Jiménez","relativeDate":"3 weeks ago"},{"hash":"2b090ca7a0","message":"feat: auto-verify emails for SCIM users when email is updated (#19362)","author":"Javier Rengel Jiménez","relativeDate":"4 weeks ago"}]},"domain":"Roles & Permissions","gitSummary":"Bump prettier and organize imports\nDelete OpenID identities to prevent conflicts\nAuto-verify emails for SCIM users","healthSummary":"Hot spot: 12 edges, 2770 lines, 22 churn\n5 authors — high coupling with active coordination"},{"id":"ServiceAccountService","type":"service","ee":true,"lineCount":334,"gitActivity":{"commits":3,"authors":2,"churn":1,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"056bd51eae","message":"feat: improve service account authentication with CASL abilities (#15354)","author":"Javier Rengel Jiménez","relativeDate":"8 months ago"},{"hash":"708119a7eb","message":"feat: service accounts (#15261)","author":"Javier Rengel Jiménez","relativeDate":"8 months ago"}]},"domain":"User Auth","gitSummary":"Bump prettier and organize imports\nImprove service account auth with CASL\nAdd service accounts feature","healthSummary":"Low coupling (4 edges), stable — minimal risk"},{"id":"SupportService","type":"service","ee":true,"lineCount":346,"gitActivity":{"commits":7,"authors":4,"churn":1,"recentCommits":[{"hash":"61cf8937d8","message":"feat: add expiration time to support file uploads (#19271)","author":"Jose Rego","relativeDate":"4 weeks ago"},{"hash":"3287365050","message":"fix: Revert \"fix: Revert \"feat: refactor AsyncQuery and Project service to use account where needed for Embedded Explores (#15893)\" (#16007)\" (#16023)","author":"Steve Gardner","relativeDate":"7 months ago"},{"hash":"9356f4e354","message":"fix: Revert \"feat: refactor AsyncQuery and Project service to use account where needed for Embedded Explores (#15893)\" (#16007)","author":"Steve Gardner","relativeDate":"7 months ago"}]},"domain":"Support","gitSummary":"Add expiration time to support uploads\nRefactor AsyncQuery service for embeds\nRevert AsyncQuery refactor temporarily","healthSummary":"Moderate coupling (9 edges), stable — manageable"},{"id":"AiAgentModel","type":"model","ee":true,"lineCount":4514,"gitActivity":{"commits":95,"authors":5,"churn":58,"recentCommits":[{"hash":"85d1f0c097","message":"chore: bump prettier and organize imports plugin (#19149)","author":"Bruno Almeida","relativeDate":"10 days ago"},{"hash":"6d4423c05e","message":"feat: add error message to ai prompts (#19692)","author":"Tatiana Inama","relativeDate":"11 days ago"},{"hash":"6156faf114","message":"feat: add project filtering for Slack multi-agent channel (#19456)","author":"Irakli Janiashvili","relativeDate":"3 weeks ago"}]},"domain":"AI & Analytics","gitSummary":"Bump prettier and organize imports\nAdd error message to AI prompts\nAdd project filtering for Slack channel","healthSummary":"Large hot spot: 3 edges, 4514 lines, 58 churn\n5 authors, 95 commits — extreme size with churn risk"},{"id":"AiOrganizationSettingsModel","type":"model","ee":true,"lineCount":119,"gitActivity":{"commits":2,"authors":1,"churn":2,"recentCommits":[{"hash":"f0677cf575","message":"feat: enable ai visibility in admin panel (#17355)","author":"Tatiana Inama","relativeDate":"4 months ago"},{"hash":"35b80f5fa6","message":"feat: ai organization settings crud (#17353)","author":"Tatiana Inama","relativeDate":"4 months ago"}]},"domain":"AI & Analytics","gitSummary":"Enable AI visibility in admin panel\nAdd AI organization settings CRUD\nCreate AI organization settings","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"EmbedModel","type":"model","ee":true,"lineCount":144,"gitActivity":{"commits":9,"authors":5,"churn":3,"recentCommits":[{"hash":"c112d762a1","message":"fix: fallback to account user id for isFeatureEnabled in embed service (#18565)","author":"Yegor Borisenco","relativeDate":"9 weeks ago"},{"hash":"38edc6bde4","message":"feat: add charts to embedding table (#17596)","author":"Steve Gardner","relativeDate":"3 months ago"},{"hash":"074fef745a","message":"fix: update instance embed (#17267)","author":"Javier Rengel Jiménez","relativeDate":"4 months ago"}]},"domain":"Embed","gitSummary":"Fallback to account user for feature flag\nAdd charts to embedding table\nUpdate instance embed functionality","healthSummary":"Low coupling (2 edges), stable — minimal risk"},{"id":"McpContextModel","type":"model","ee":true,"lineCount":88,"gitActivity":{"commits":2,"authors":2,"churn":2,"recentCommits":[{"hash":"d95aea9698","message":"feat: add tag filtering to MCP service project context (#16560)","author":"Giorgi Bagdavadze","relativeDate":"5 months ago"},{"hash":"bd5a296d5e","message":"feat: add MCP context table and project selection tools (#16339)","author":"Javier Rengel Jiménez","relativeDate":"6 months ago"}]},"domain":"MCP","gitSummary":"Add tag filtering to MCP project context\nAdd MCP context table and project tools\nCreate MCP context model","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"DashboardSummaryModel","type":"model","ee":true,"lineCount":78,"gitActivity":{"commits":1,"authors":1,"churn":0,"recentCommits":[{"hash":"3164fa8817","message":"feat: ee features (#13402)","author":"Jose Rego","relativeDate":"1 year ago"}]},"domain":"Dashboards","gitSummary":"Add EE features support\nCreate dashboard summary model\nStore dashboard summaries","healthSummary":"Minimal coupling (1 edge), stable — low risk"},{"id":"ServiceAccountModel","type":"model","ee":true,"lineCount":162,"gitActivity":{"commits":4,"authors":1,"churn":1,"recentCommits":[{"hash":"3990a7c598","message":"fix: improve token hash (#16918)","author":"Javier Rengel Jiménez","relativeDate":"5 months ago"},{"hash":"df54efb8c5","message":"feat: add updateSetup config for API key and dbt token updates (#15710)","author":"Javier Rengel Jiménez","relativeDate":"7 months ago"},{"hash":"056bd51eae","message":"feat: improve service account authentication with CASL abilities (#15354)","author":"Javier Rengel Jiménez","relativeDate":"8 months ago"}]},"domain":"User Auth","gitSummary":"Improve token hash security\nAdd updateSetup config for tokens\nImprove service account auth with CASL","healthSummary":"Low coupling (3 edges), stable — minimal risk"}],"edges":[{"from":"ChangesetController","to":"ChangesetService","type":"uses_service"},{"from":"OrganizationRolesController","to":"RolesService","type":"uses_service"},{"from":"ProjectRolesController","to":"RolesService","type":"uses_service"},{"from":"bigquerySSOController","to":"ProjectService","type":"uses_service"},{"from":"bigquerySSOController","to":"UserService","type":"uses_service"},{"from":"catalogController","to":"CatalogService","type":"uses_service"},{"from":"commentsController","to":"CommentService","type":"uses_service"},{"from":"csvController","to":"SchedulerService","type":"uses_service"},{"from":"dashboardController","to":"DashboardService","type":"uses_service"},{"from":"dashboardController","to":"PromoteService","type":"uses_service"},{"from":"exploreController","to":"CsvService","type":"uses_service"},{"from":"exploreController","to":"ProjectService","type":"uses_service"},{"from":"funnelController","to":"FunnelService","type":"uses_service"},{"from":"gitIntegrationController","to":"GitIntegrationService","type":"uses_service"},{"from":"githubController","to":"GitIntegrationService","type":"uses_service"},{"from":"githubController","to":"GithubAppService","type":"uses_service"},{"from":"gitlabController","to":"GitlabAppService","type":"uses_service"},{"from":"googleDriveController","to":"GdriveService","type":"uses_service"},{"from":"googleDriveController","to":"UserService","type":"uses_service"},{"from":"groupsController","to":"GroupService","type":"uses_service"},{"from":"metricsExplorerController","to":"MetricsExplorerService","type":"uses_service"},{"from":"notificationsController","to":"NotificationService","type":"uses_service"},{"from":"organizationController","to":"OrganizationService","type":"uses_service"},{"from":"organizationController","to":"ProjectService","type":"uses_service"},{"from":"organizationController","to":"SchedulerService","type":"uses_service"},{"from":"organizationController","to":"UserService","type":"uses_service"},{"from":"pinningController","to":"PinningService","type":"uses_service"},{"from":"projectCompileLogController","to":"ProjectCompileLogService","type":"uses_service"},{"from":"projectController","to":"CoderService","type":"uses_service"},{"from":"projectController","to":"DashboardService","type":"uses_service"},{"from":"projectController","to":"ProjectService","type":"uses_service"},{"from":"projectController","to":"SchedulerService","type":"uses_service"},{"from":"renameController","to":"RenameService","type":"uses_service"},{"from":"runQueryController","to":"LightdashAnalyticsService","type":"uses_service"},{"from":"runQueryController","to":"ProjectService","type":"uses_service"},{"from":"savedChartController","to":"CsvService","type":"uses_service"},{"from":"savedChartController","to":"LightdashAnalyticsService","type":"uses_service"},{"from":"savedChartController","to":"ProjectService","type":"uses_service"},{"from":"savedChartController","to":"PromoteService","type":"uses_service"},{"from":"savedChartController","to":"SavedChartService","type":"uses_service"},{"from":"schedulerController","to":"SchedulerService","type":"uses_service"},{"from":"shareController","to":"ShareService","type":"uses_service"},{"from":"slackController","to":"DownloadFileService","type":"uses_service"},{"from":"slackController","to":"SlackIntegrationService","type":"uses_service"},{"from":"slackController","to":"UserService","type":"uses_service"},{"from":"spaceController","to":"SpaceService","type":"uses_service"},{"from":"spotlightController","to":"SpotlightService","type":"uses_service"},{"from":"sqlRunnerController","to":"GitIntegrationService","type":"uses_service"},{"from":"sqlRunnerController","to":"ProjectService","type":"uses_service"},{"from":"sqlRunnerController","to":"SavedSqlService","type":"uses_service"},{"from":"sshController","to":"SshKeyPairService","type":"uses_service"},{"from":"userActivityController","to":"AnalyticsService","type":"uses_service"},{"from":"userAttributesController","to":"UserAttributesService","type":"uses_service"},{"from":"userController","to":"PersonalAccessTokenService","type":"uses_service"},{"from":"userController","to":"UserService","type":"uses_service"},{"from":"validationController","to":"ValidationService","type":"uses_service"},{"from":"v2/ContentController","to":"ContentService","type":"uses_service"},{"from":"v2/DashboardController","to":"DashboardService","type":"uses_service"},{"from":"v2/FeatureFlagController","to":"FeatureFlagService","type":"uses_service"},{"from":"v2/ParametersController","to":"ProjectParametersService","type":"uses_service"},{"from":"v2/ParametersController","to":"ProjectService","type":"uses_service"},{"from":"v2/QueryController","to":"AsyncQueryService","type":"uses_service"},{"from":"v2/SavedChartController","to":"SavedChartService","type":"uses_service"},{"from":"apiV1Router","to":"HealthService","type":"router_uses_service"},{"from":"dashboardRouter","to":"AnalyticsService","type":"router_uses_service"},{"from":"dashboardRouter","to":"CsvService","type":"router_uses_service"},{"from":"dashboardRouter","to":"DashboardService","type":"router_uses_service"},{"from":"dashboardRouter","to":"ProjectService","type":"router_uses_service"},{"from":"dashboardRouter","to":"UnfurlService","type":"router_uses_service"},{"from":"headlessBrowser","to":"UserService","type":"router_uses_service"},{"from":"inviteLinksRouter","to":"UserService","type":"router_uses_service"},{"from":"jobsRouter","to":"ProjectService","type":"router_uses_service"},{"from":"mcpRouter","to":"OauthService","type":"router_uses_service"},{"from":"oauthRouter","to":"OauthService","type":"router_uses_service"},{"from":"organizationRouter","to":"OrganizationService","type":"router_uses_service"},{"from":"organizationRouter","to":"ProjectService","type":"router_uses_service"},{"from":"passwordResetLinksRouter","to":"UserService","type":"router_uses_service"},{"from":"projectRouter","to":"DownloadFileService","type":"router_uses_service"},{"from":"projectRouter","to":"ProjectService","type":"router_uses_service"},{"from":"projectRouter","to":"SavedChartService","type":"router_uses_service"},{"from":"projectRouter","to":"SearchService","type":"router_uses_service"},{"from":"projectRouter","to":"SpaceService","type":"router_uses_service"},{"from":"savedChartRouter","to":"ProjectService","type":"router_uses_service"},{"from":"savedChartRouter","to":"SavedChartService","type":"router_uses_service"},{"from":"userRouter","to":"UserService","type":"router_uses_service"},{"from":"AnalyticsService","to":"AnalyticsModel","type":"injects_model"},{"from":"AnalyticsService","to":"ProjectModel","type":"injects_model"},{"from":"AnalyticsService","to":"CsvService","type":"injects_service"},{"from":"CommentService","to":"CommentModel","type":"injects_model"},{"from":"CommentService","to":"DashboardModel","type":"injects_model"},{"from":"CommentService","to":"FeatureFlagModel","type":"injects_model"},{"from":"CommentService","to":"NotificationsModel","type":"injects_model"},{"from":"CommentService","to":"SpaceModel","type":"injects_model"},{"from":"CommentService","to":"UserModel","type":"injects_model"},{"from":"CsvService","to":"DashboardModel","type":"injects_model"},{"from":"CsvService","to":"DownloadFileModel","type":"injects_model"},{"from":"CsvService","to":"ProjectModel","type":"injects_model"},{"from":"CsvService","to":"SavedChartModel","type":"injects_model"},{"from":"CsvService","to":"SavedSqlModel","type":"injects_model"},{"from":"CsvService","to":"UserModel","type":"injects_model"},{"from":"CsvService","to":"S3Client","type":"injects_client"},{"from":"CsvService","to":"SchedulerClient","type":"injects_client"},{"from":"CsvService","to":"PivotTableService","type":"injects_service"},{"from":"CsvService","to":"ProjectService","type":"injects_service"},{"from":"DashboardService","to":"AnalyticsModel","type":"injects_model"},{"from":"DashboardService","to":"CatalogModel","type":"injects_model"},{"from":"DashboardService","to":"DashboardModel","type":"injects_model"},{"from":"DashboardService","to":"FeatureFlagModel","type":"injects_model"},{"from":"DashboardService","to":"PinnedListModel","type":"injects_model"},{"from":"DashboardService","to":"ProjectModel","type":"injects_model"},{"from":"DashboardService","to":"SavedChartModel","type":"injects_model"},{"from":"DashboardService","to":"SchedulerModel","type":"injects_model"},{"from":"DashboardService","to":"SpaceModel","type":"injects_model"},{"from":"DashboardService","to":"SchedulerClient","type":"injects_client"},{"from":"DashboardService","to":"SlackClient","type":"injects_client"},{"from":"DashboardService","to":"SavedChartService","type":"injects_service"},{"from":"DownloadFileService","to":"DownloadFileModel","type":"injects_model"},{"from":"GitIntegrationService","to":"GithubAppInstallationsModel","type":"injects_model"},{"from":"GitIntegrationService","to":"ProjectModel","type":"injects_model"},{"from":"GitIntegrationService","to":"SavedChartModel","type":"injects_model"},{"from":"GitIntegrationService","to":"SpaceModel","type":"injects_model"},{"from":"GithubAppService","to":"GithubAppInstallationsModel","type":"injects_model"},{"from":"GithubAppService","to":"UserModel","type":"injects_model"},{"from":"GitlabAppService","to":"GitlabAppInstallationsModel","type":"injects_model"},{"from":"GitlabAppService","to":"UserModel","type":"injects_model"},{"from":"GdriveService","to":"DashboardModel","type":"injects_model"},{"from":"GdriveService","to":"ProjectModel","type":"injects_model"},{"from":"GdriveService","to":"SavedChartModel","type":"injects_model"},{"from":"GdriveService","to":"UserModel","type":"injects_model"},{"from":"GdriveService","to":"SchedulerClient","type":"injects_client"},{"from":"GdriveService","to":"ProjectService","type":"injects_service"},{"from":"GroupService","to":"GroupsModel","type":"injects_model"},{"from":"GroupService","to":"ProjectModel","type":"injects_model"},{"from":"GroupService","to":"FeatureFlagService","type":"injects_service"},{"from":"HealthService","to":"MigrationModel","type":"injects_model"},{"from":"HealthService","to":"OrganizationModel","type":"injects_model"},{"from":"NotificationService","to":"NotificationsModel","type":"injects_model"},{"from":"OauthService","to":"OauthModel","type":"injects_model"},{"from":"OauthService","to":"UserModel","type":"injects_model"},{"from":"OrganizationService","to":"GroupsModel","type":"injects_model"},{"from":"OrganizationService","to":"OnboardingModel","type":"injects_model"},{"from":"OrganizationService","to":"OrganizationAllowedEmailDomainsModel","type":"injects_model"},{"from":"OrganizationService","to":"OrganizationMemberProfileModel","type":"injects_model"},{"from":"OrganizationService","to":"OrganizationModel","type":"injects_model"},{"from":"OrganizationService","to":"ProjectModel","type":"injects_model"},{"from":"OrganizationService","to":"UserModel","type":"injects_model"},{"from":"PermissionsService","to":"DashboardModel","type":"injects_model"},{"from":"PersonalAccessTokenService","to":"PersonalAccessTokenModel","type":"injects_model"},{"from":"PinningService","to":"DashboardModel","type":"injects_model"},{"from":"PinningService","to":"FeatureFlagModel","type":"injects_model"},{"from":"PinningService","to":"PinnedListModel","type":"injects_model"},{"from":"PinningService","to":"ProjectModel","type":"injects_model"},{"from":"PinningService","to":"ResourceViewItemModel","type":"injects_model"},{"from":"PinningService","to":"SavedChartModel","type":"injects_model"},{"from":"PinningService","to":"SpaceModel","type":"injects_model"},{"from":"PivotTableService","to":"DownloadFileModel","type":"injects_model"},{"from":"PivotTableService","to":"S3Client","type":"injects_client"},{"from":"ProjectService","to":"AnalyticsModel","type":"injects_model"},{"from":"ProjectService","to":"CatalogModel","type":"injects_model"},{"from":"ProjectService","to":"ContentModel","type":"injects_model"},{"from":"ProjectService","to":"DashboardModel","type":"injects_model"},{"from":"ProjectService","to":"DownloadFileModel","type":"injects_model"},{"from":"ProjectService","to":"EmailModel","type":"injects_model"},{"from":"ProjectService","to":"FeatureFlagModel","type":"injects_model"},{"from":"ProjectService","to":"GroupsModel","type":"injects_model"},{"from":"ProjectService","to":"JobModel","type":"injects_model"},{"from":"ProjectService","to":"OnboardingModel","type":"injects_model"},{"from":"ProjectService","to":"OrganizationWarehouseCredentialsModel","type":"injects_model"},{"from":"ProjectService","to":"ProjectCompileLogModel","type":"injects_model"},{"from":"ProjectService","to":"ProjectModel","type":"injects_model"},{"from":"ProjectService","to":"ProjectParametersModel","type":"injects_model"},{"from":"ProjectService","to":"SavedChartModel","type":"injects_model"},{"from":"ProjectService","to":"SpaceModel","type":"injects_model"},{"from":"ProjectService","to":"SshKeyPairModel","type":"injects_model"},{"from":"ProjectService","to":"TagsModel","type":"injects_model"},{"from":"ProjectService","to":"UserAttributesModel","type":"injects_model"},{"from":"ProjectService","to":"UserModel","type":"injects_model"},{"from":"ProjectService","to":"UserWarehouseCredentialsModel","type":"injects_model"},{"from":"ProjectService","to":"WarehouseAvailableTablesModel","type":"injects_model"},{"from":"ProjectService","to":"EmailClient","type":"injects_client"},{"from":"ProjectService","to":"S3CacheClient","type":"injects_client"},{"from":"ProjectService","to":"S3Client","type":"injects_client"},{"from":"ProjectService","to":"SchedulerClient","type":"injects_client"},{"from":"AsyncQueryService","to":"AnalyticsModel","type":"injects_model"},{"from":"AsyncQueryService","to":"CatalogModel","type":"injects_model"},{"from":"AsyncQueryService","to":"ContentModel","type":"injects_model"},{"from":"AsyncQueryService","to":"DashboardModel","type":"injects_model"},{"from":"AsyncQueryService","to":"DownloadAuditModel","type":"injects_model"},{"from":"AsyncQueryService","to":"DownloadFileModel","type":"injects_model"},{"from":"AsyncQueryService","to":"EmailModel","type":"injects_model"},{"from":"AsyncQueryService","to":"FeatureFlagModel","type":"injects_model"},{"from":"AsyncQueryService","to":"GroupsModel","type":"injects_model"},{"from":"AsyncQueryService","to":"JobModel","type":"injects_model"},{"from":"AsyncQueryService","to":"OnboardingModel","type":"injects_model"},{"from":"AsyncQueryService","to":"OrganizationWarehouseCredentialsModel","type":"injects_model"},{"from":"AsyncQueryService","to":"ProjectCompileLogModel","type":"injects_model"},{"from":"AsyncQueryService","to":"ProjectModel","type":"injects_model"},{"from":"AsyncQueryService","to":"ProjectParametersModel","type":"injects_model"},{"from":"AsyncQueryService","to":"QueryHistoryModel","type":"injects_model"},{"from":"AsyncQueryService","to":"SavedChartModel","type":"injects_model"},{"from":"AsyncQueryService","to":"SavedSqlModel","type":"injects_model"},{"from":"AsyncQueryService","to":"SpaceModel","type":"injects_model"},{"from":"AsyncQueryService","to":"SshKeyPairModel","type":"injects_model"},{"from":"AsyncQueryService","to":"TagsModel","type":"injects_model"},{"from":"AsyncQueryService","to":"UserAttributesModel","type":"injects_model"},{"from":"AsyncQueryService","to":"UserModel","type":"injects_model"},{"from":"AsyncQueryService","to":"UserWarehouseCredentialsModel","type":"injects_model"},{"from":"AsyncQueryService","to":"WarehouseAvailableTablesModel","type":"injects_model"},{"from":"AsyncQueryService","to":"EmailClient","type":"injects_client"},{"from":"AsyncQueryService","to":"ResultsFileStorageClient","type":"injects_client"},{"from":"AsyncQueryService","to":"S3CacheClient","type":"injects_client"},{"from":"AsyncQueryService","to":"S3Client","type":"injects_client"},{"from":"AsyncQueryService","to":"SchedulerClient","type":"injects_client"},{"from":"AsyncQueryService","to":"PermissionsService","type":"injects_service"},{"from":"AsyncQueryService","to":"PivotTableService","type":"injects_service"},{"from":"SavedChartService","to":"AnalyticsModel","type":"injects_model"},{"from":"SavedChartService","to":"CatalogModel","type":"injects_model"},{"from":"SavedChartService","to":"DashboardModel","type":"injects_model"},{"from":"SavedChartService","to":"FeatureFlagModel","type":"injects_model"},{"from":"SavedChartService","to":"PinnedListModel","type":"injects_model"},{"from":"SavedChartService","to":"ProjectModel","type":"injects_model"},{"from":"SavedChartService","to":"SavedChartModel","type":"injects_model"},{"from":"SavedChartService","to":"SchedulerModel","type":"injects_model"},{"from":"SavedChartService","to":"SpaceModel","type":"injects_model"},{"from":"SavedChartService","to":"GoogleDriveClient","type":"injects_client"},{"from":"SavedChartService","to":"SchedulerClient","type":"injects_client"},{"from":"SavedChartService","to":"SlackClient","type":"injects_client"},{"from":"SavedChartService","to":"PermissionsService","type":"injects_service"},{"from":"SavedChartService","to":"UserService","type":"injects_service"},{"from":"SchedulerService","to":"DashboardModel","type":"injects_model"},{"from":"SchedulerService","to":"FeatureFlagModel","type":"injects_model"},{"from":"SchedulerService","to":"JobModel","type":"injects_model"},{"from":"SchedulerService","to":"ProjectModel","type":"injects_model"},{"from":"SchedulerService","to":"SavedChartModel","type":"injects_model"},{"from":"SchedulerService","to":"SchedulerModel","type":"injects_model"},{"from":"SchedulerService","to":"SpaceModel","type":"injects_model"},{"from":"SchedulerService","to":"UserModel","type":"injects_model"},{"from":"SchedulerService","to":"GoogleDriveClient","type":"injects_client"},{"from":"SchedulerService","to":"SchedulerClient","type":"injects_client"},{"from":"SchedulerService","to":"SlackClient","type":"injects_client"},{"from":"SchedulerService","to":"UserService","type":"injects_service"},{"from":"SearchService","to":"FeatureFlagModel","type":"injects_model"},{"from":"SearchService","to":"ProjectModel","type":"injects_model"},{"from":"SearchService","to":"SearchModel","type":"injects_model"},{"from":"SearchService","to":"SpaceModel","type":"injects_model"},{"from":"SearchService","to":"UserAttributesModel","type":"injects_model"},{"from":"ShareService","to":"ShareModel","type":"injects_model"},{"from":"SshKeyPairService","to":"SshKeyPairModel","type":"injects_model"},{"from":"SlackIntegrationService","to":"SlackAuthenticationModel","type":"injects_model"},{"from":"SlackIntegrationService","to":"SlackClient","type":"injects_client"},{"from":"SpacePermissionService","to":"SpaceModel","type":"injects_model"},{"from":"SpacePermissionService","to":"SpacePermissionModel","type":"injects_model"},{"from":"SpaceService","to":"FeatureFlagModel","type":"injects_model"},{"from":"SpaceService","to":"PinnedListModel","type":"injects_model"},{"from":"SpaceService","to":"ProjectModel","type":"injects_model"},{"from":"SpaceService","to":"SpaceModel","type":"injects_model"},{"from":"UnfurlService","to":"DashboardModel","type":"injects_model"},{"from":"UnfurlService","to":"DownloadFileModel","type":"injects_model"},{"from":"UnfurlService","to":"FeatureFlagModel","type":"injects_model"},{"from":"UnfurlService","to":"ProjectModel","type":"injects_model"},{"from":"UnfurlService","to":"SavedChartModel","type":"injects_model"},{"from":"UnfurlService","to":"ShareModel","type":"injects_model"},{"from":"UnfurlService","to":"SlackAuthenticationModel","type":"injects_model"},{"from":"UnfurlService","to":"SpaceModel","type":"injects_model"},{"from":"UnfurlService","to":"S3Client","type":"injects_client"},{"from":"UnfurlService","to":"SlackClient","type":"injects_client"},{"from":"UserAttributesService","to":"UserAttributesModel","type":"injects_model"},{"from":"UserService","to":"EmailModel","type":"injects_model"},{"from":"UserService","to":"GroupsModel","type":"injects_model"},{"from":"UserService","to":"InviteLinkModel","type":"injects_model"},{"from":"UserService","to":"OpenIdIdentityModel","type":"injects_model"},{"from":"UserService","to":"OrganizationAllowedEmailDomainsModel","type":"injects_model"},{"from":"UserService","to":"OrganizationMemberProfileModel","type":"injects_model"},{"from":"UserService","to":"OrganizationModel","type":"injects_model"},{"from":"UserService","to":"PasswordResetLinkModel","type":"injects_model"},{"from":"UserService","to":"PersonalAccessTokenModel","type":"injects_model"},{"from":"UserService","to":"SessionModel","type":"injects_model"},{"from":"UserService","to":"UserModel","type":"injects_model"},{"from":"UserService","to":"UserWarehouseCredentialsModel","type":"injects_model"},{"from":"UserService","to":"WarehouseAvailableTablesModel","type":"injects_model"},{"from":"UserService","to":"EmailClient","type":"injects_client"},{"from":"ValidationService","to":"DashboardModel","type":"injects_model"},{"from":"ValidationService","to":"FeatureFlagModel","type":"injects_model"},{"from":"ValidationService","to":"ProjectModel","type":"injects_model"},{"from":"ValidationService","to":"SavedChartModel","type":"injects_model"},{"from":"ValidationService","to":"SpaceModel","type":"injects_model"},{"from":"ValidationService","to":"ValidationModel","type":"injects_model"},{"from":"ValidationService","to":"SchedulerClient","type":"injects_client"},{"from":"CoderService","to":"DashboardModel","type":"injects_model"},{"from":"CoderService","to":"FeatureFlagModel","type":"injects_model"},{"from":"CoderService","to":"ProjectModel","type":"injects_model"},{"from":"CoderService","to":"SavedChartModel","type":"injects_model"},{"from":"CoderService","to":"SavedSqlModel","type":"injects_model"},{"from":"CoderService","to":"SpaceModel","type":"injects_model"},{"from":"CoderService","to":"SchedulerClient","type":"injects_client"},{"from":"CoderService","to":"PromoteService","type":"injects_service"},{"from":"CatalogService","to":"CatalogModel","type":"injects_model"},{"from":"CatalogService","to":"ChangesetModel","type":"injects_model"},{"from":"CatalogService","to":"FeatureFlagModel","type":"injects_model"},{"from":"CatalogService","to":"ProjectModel","type":"injects_model"},{"from":"CatalogService","to":"SavedChartModel","type":"injects_model"},{"from":"CatalogService","to":"SpaceModel","type":"injects_model"},{"from":"CatalogService","to":"TagsModel","type":"injects_model"},{"from":"CatalogService","to":"UserAttributesModel","type":"injects_model"},{"from":"ChangesetService","to":"CatalogModel","type":"injects_model"},{"from":"ChangesetService","to":"ChangesetModel","type":"injects_model"},{"from":"ChangesetService","to":"ProjectModel","type":"injects_model"},{"from":"MetricsExplorerService","to":"ProjectModel","type":"injects_model"},{"from":"MetricsExplorerService","to":"AsyncQueryService","type":"injects_service"},{"from":"MetricsExplorerService","to":"CatalogService","type":"injects_service"},{"from":"MetricsExplorerService","to":"ProjectService","type":"injects_service"},{"from":"PromoteService","to":"DashboardModel","type":"injects_model"},{"from":"PromoteService","to":"FeatureFlagModel","type":"injects_model"},{"from":"PromoteService","to":"ProjectModel","type":"injects_model"},{"from":"PromoteService","to":"SavedChartModel","type":"injects_model"},{"from":"PromoteService","to":"SpaceModel","type":"injects_model"},{"from":"RenameService","to":"DashboardModel","type":"injects_model"},{"from":"RenameService","to":"ProjectModel","type":"injects_model"},{"from":"RenameService","to":"SavedChartModel","type":"injects_model"},{"from":"RenameService","to":"SchedulerModel","type":"injects_model"},{"from":"RenameService","to":"SchedulerClient","type":"injects_client"},{"from":"SavedSqlService","to":"AnalyticsModel","type":"injects_model"},{"from":"SavedSqlService","to":"FeatureFlagModel","type":"injects_model"},{"from":"SavedSqlService","to":"ProjectModel","type":"injects_model"},{"from":"SavedSqlService","to":"SavedSqlModel","type":"injects_model"},{"from":"SavedSqlService","to":"SpaceModel","type":"injects_model"},{"from":"SavedSqlService","to":"SchedulerClient","type":"injects_client"},{"from":"ContentService","to":"ContentModel","type":"injects_model"},{"from":"ContentService","to":"FeatureFlagModel","type":"injects_model"},{"from":"ContentService","to":"ProjectModel","type":"injects_model"},{"from":"ContentService","to":"SpaceModel","type":"injects_model"},{"from":"ContentService","to":"DashboardService","type":"injects_service"},{"from":"ContentService","to":"SavedChartService","type":"injects_service"},{"from":"ContentService","to":"SavedSqlService","type":"injects_service"},{"from":"ContentService","to":"SpaceService","type":"injects_service"},{"from":"FeatureFlagService","to":"FeatureFlagModel","type":"injects_model"},{"from":"FunnelService","to":"ProjectModel","type":"injects_model"},{"from":"FunnelService","to":"ProjectService","type":"injects_service"},{"from":"RolesService","to":"GroupsModel","type":"injects_model"},{"from":"RolesService","to":"OrganizationModel","type":"injects_model"},{"from":"RolesService","to":"ProjectModel","type":"injects_model"},{"from":"RolesService","to":"RolesModel","type":"injects_model"},{"from":"RolesService","to":"UserModel","type":"injects_model"},{"from":"RolesService","to":"EmailClient","type":"injects_client"},{"from":"SpotlightService","to":"ProjectModel","type":"injects_model"},{"from":"SpotlightService","to":"SpotlightTableConfigModel","type":"injects_model"},{"from":"LightdashAnalyticsService","to":"ProjectModel","type":"injects_model"},{"from":"LightdashAnalyticsService","to":"SavedChartModel","type":"injects_model"},{"from":"ProjectParametersService","to":"ProjectModel","type":"injects_model"},{"from":"ProjectParametersService","to":"ProjectParametersModel","type":"injects_model"},{"from":"ProjectCompileLogService","to":"ProjectCompileLogModel","type":"injects_model"},{"from":"SlackService","to":"SlackClient","type":"injects_client"},{"from":"SlackService","to":"UnfurlService","type":"injects_service"},{"from":"ee/AiAgentAdminController","to":"AiAgentAdminService","type":"uses_service"},{"from":"ee/AiAgentAdminController","to":"AiOrganizationSettingsService","type":"uses_service"},{"from":"ee/CustomRolesController","to":"RolesService","type":"uses_service"},{"from":"ee/OrganizationWarehouseCredentialsController","to":"OrganizationWarehouseCredentialsService","type":"uses_service"},{"from":"ee/aiAgentController","to":"AiAgentService","type":"uses_service"},{"from":"ee/aiController","to":"AiService","type":"uses_service"},{"from":"ee/databricksSSOController","to":"UserService","type":"uses_service"},{"from":"ee/embedController","to":"EmbedService","type":"uses_service"},{"from":"ee/scimGroupController","to":"ScimService","type":"uses_service"},{"from":"ee/scimOrganizationAccessTokenController","to":"ServiceAccountService","type":"uses_service"},{"from":"ee/scimRoleController","to":"ScimService","type":"uses_service"},{"from":"ee/scimUserController","to":"ScimService","type":"uses_service"},{"from":"ee/serviceAccountsController","to":"ServiceAccountService","type":"uses_service"},{"from":"ee/snowflakeController","to":"UserService","type":"uses_service"},{"from":"ee/supportController","to":"SupportService","type":"uses_service"},{"from":"EmbedService","to":"DashboardModel","type":"injects_model"},{"from":"EmbedService","to":"EmbedModel","type":"injects_model"},{"from":"EmbedService","to":"FeatureFlagModel","type":"injects_model"},{"from":"EmbedService","to":"OrganizationModel","type":"injects_model"},{"from":"EmbedService","to":"ProjectModel","type":"injects_model"},{"from":"EmbedService","to":"SavedChartModel","type":"injects_model"},{"from":"EmbedService","to":"UserAttributesModel","type":"injects_model"},{"from":"EmbedService","to":"AsyncQueryService","type":"injects_service"},{"from":"EmbedService","to":"ProjectService","type":"injects_service"},{"from":"AiService","to":"DashboardModel","type":"injects_model"},{"from":"AiService","to":"DashboardSummaryModel","type":"injects_model"},{"from":"AiService","to":"FeatureFlagService","type":"injects_service"},{"from":"AiService","to":"ProjectService","type":"injects_service"},{"from":"AiAgentService","to":"AiAgentModel","type":"injects_model"},{"from":"AiAgentService","to":"CatalogModel","type":"injects_model"},{"from":"AiAgentService","to":"ChangesetModel","type":"injects_model"},{"from":"AiAgentService","to":"GroupsModel","type":"injects_model"},{"from":"AiAgentService","to":"OpenIdIdentityModel","type":"injects_model"},{"from":"AiAgentService","to":"ProjectModel","type":"injects_model"},{"from":"AiAgentService","to":"SearchModel","type":"injects_model"},{"from":"AiAgentService","to":"SlackAuthenticationModel","type":"injects_model"},{"from":"AiAgentService","to":"UserAttributesModel","type":"injects_model"},{"from":"AiAgentService","to":"UserModel","type":"injects_model"},{"from":"AiAgentService","to":"SchedulerClient","type":"injects_client"},{"from":"AiAgentService","to":"SlackClient","type":"injects_client"},{"from":"AiAgentService","to":"AiOrganizationSettingsService","type":"injects_service"},{"from":"AiAgentService","to":"AsyncQueryService","type":"injects_service"},{"from":"AiAgentService","to":"CatalogService","type":"injects_service"},{"from":"AiAgentService","to":"FeatureFlagService","type":"injects_service"},{"from":"AiAgentService","to":"ProjectService","type":"injects_service"},{"from":"AiAgentService","to":"ShareService","type":"injects_service"},{"from":"AiAgentService","to":"SpaceService","type":"injects_service"},{"from":"AiAgentAdminService","to":"AiAgentModel","type":"injects_model"},{"from":"AiOrganizationSettingsService","to":"AiOrganizationSettingsModel","type":"injects_model"},{"from":"AiOrganizationSettingsService","to":"FeatureFlagModel","type":"injects_model"},{"from":"AiOrganizationSettingsService","to":"OrganizationModel","type":"injects_model"},{"from":"ScimService","to":"EmailModel","type":"injects_model"},{"from":"ScimService","to":"FeatureFlagModel","type":"injects_model"},{"from":"ScimService","to":"GroupsModel","type":"injects_model"},{"from":"ScimService","to":"OpenIdIdentityModel","type":"injects_model"},{"from":"ScimService","to":"OrganizationMemberProfileModel","type":"injects_model"},{"from":"ScimService","to":"ProjectModel","type":"injects_model"},{"from":"ScimService","to":"RolesModel","type":"injects_model"},{"from":"ScimService","to":"ServiceAccountModel","type":"injects_model"},{"from":"ScimService","to":"UserModel","type":"injects_model"},{"from":"ServiceAccountService","to":"FeatureFlagModel","type":"injects_model"},{"from":"ServiceAccountService","to":"ServiceAccountModel","type":"injects_model"},{"from":"SlackIntegrationService","to":"AiAgentModel","type":"injects_model"},{"from":"SupportService","to":"DashboardModel","type":"injects_model"},{"from":"SupportService","to":"OrganizationModel","type":"injects_model"},{"from":"SupportService","to":"ProjectModel","type":"injects_model"},{"from":"SupportService","to":"SavedChartModel","type":"injects_model"},{"from":"SupportService","to":"SpaceModel","type":"injects_model"},{"from":"SupportService","to":"S3Client","type":"injects_client"},{"from":"SupportService","to":"ProjectService","type":"injects_service"},{"from":"SupportService","to":"UnfurlService","type":"injects_service"},{"from":"OrganizationWarehouseCredentialsService","to":"OrganizationWarehouseCredentialsModel","type":"injects_model"},{"from":"OrganizationWarehouseCredentialsService","to":"UserModel","type":"injects_model"},{"from":"InstanceConfigurationService","to":"EmailModel","type":"injects_model"},{"from":"InstanceConfigurationService","to":"EmbedModel","type":"injects_model"},{"from":"InstanceConfigurationService","to":"OrganizationAllowedEmailDomainsModel","type":"injects_model"},{"from":"InstanceConfigurationService","to":"OrganizationModel","type":"injects_model"},{"from":"InstanceConfigurationService","to":"PersonalAccessTokenModel","type":"injects_model"},{"from":"InstanceConfigurationService","to":"ProjectModel","type":"injects_model"},{"from":"InstanceConfigurationService","to":"ServiceAccountModel","type":"injects_model"},{"from":"InstanceConfigurationService","to":"UserModel","type":"injects_model"},{"from":"InstanceConfigurationService","to":"ProjectService","type":"injects_service"},{"from":"AsyncQueryService","to":"CacheService","type":"injects_service"},{"from":"CacheService","to":"QueryHistoryModel","type":"injects_model"},{"from":"CacheService","to":"ResultsFileStorageClient","type":"injects_client"},{"from":"McpService","to":"McpContextModel","type":"injects_model"},{"from":"McpService","to":"ProjectModel","type":"injects_model"},{"from":"McpService","to":"SearchModel","type":"injects_model"},{"from":"McpService","to":"UserAttributesModel","type":"injects_model"},{"from":"McpService","to":"AsyncQueryService","type":"injects_service"},{"from":"McpService","to":"CatalogService","type":"injects_service"},{"from":"McpService","to":"FeatureFlagService","type":"injects_service"},{"from":"McpService","to":"ProjectService","type":"injects_service"},{"from":"McpService","to":"SpaceService","type":"injects_service"},{"from":"SlackService","to":"AiAgentService","type":"injects_service"}],"stats":{"controllers":41,"routers":12,"services":48,"models":56,"clients":7,"totalEdges":448}};

const color = { controller: '#79c0ff', router: '#d2a8ff', service: '#7ee787', model: '#ffa657', client: '#f778ba' };
const colorDark = { controller: '#1f6feb', router: '#8957e5', service: '#238636', model: '#9e6a03', client: '#da3633' };

const W = window.innerWidth, H = window.innerHeight;

const nodeIdx = {};
raw.nodes.forEach((n, i) => { nodeIdx[n.id] = i; });

const connCount = {};
raw.edges.forEach(e => {
  connCount[e.from] = (connCount[e.from] || 0) + 1;
  connCount[e.to] = (connCount[e.to] || 0) + 1;
});

function calcRadius(n) {
  const mode = document.getElementById('size-mode').value;
  switch (mode) {
    case 'lines': return Math.max(4, 3 + Math.sqrt((n.lineCount || 100) / 30) * 2.2);
    case 'commits': return Math.max(4, 3 + Math.sqrt((n.gitActivity?.commits || 1) / 8) * 2.2);
    case 'authors': return Math.max(4, 3 + Math.sqrt(n.gitActivity?.authors || 1) * 3);
    case 'churn': return Math.max(4, 3 + Math.sqrt((n.gitActivity?.churn || 0) / 2) * 2.5);
    default: return Math.max(4, 3 + Math.sqrt(connCount[n.id] || 1) * 2.2);
  }
}

const nodes = raw.nodes.map(n => ({ ...n, r: calcRadius(n) }));

// Health score: normalized composite of coupling, size, churn, commits
const hMetrics = {
  coupling: raw.nodes.map(n => connCount[n.id] || 0),
  lines: raw.nodes.map(n => n.lineCount || 0),
  churn: raw.nodes.map(n => n.gitActivity?.churn || 0),
  commits: raw.nodes.map(n => n.gitActivity?.commits || 0),
};
function maxNorm(vals) { const mx = Math.max(...vals); return mx === 0 ? vals.map(() => 0) : vals.map(v => v / mx); }
const nCoup = maxNorm(hMetrics.coupling), nLines = maxNorm(hMetrics.lines);
const nChurn = maxNorm(hMetrics.churn), nComm = maxNorm(hMetrics.commits);
const healthColorScale = d3.scaleLinear().domain([0, 0.5, 1]).range(['#3fb950', '#d29922', '#f47067']).interpolate(d3.interpolateRgb);
const healthStrokeScale = d3.scaleLinear().domain([0, 0.5, 1]).range(['#238636', '#9e6a03', '#da3633']).interpolate(d3.interpolateRgb);
nodes.forEach((n, i) => { n.healthScore = nCoup[i] * 0.3 + nLines[i] * 0.25 + nChurn[i] * 0.3 + nComm[i] * 0.15; });

function getNodeColor(d) { return document.getElementById('color-mode').value === 'health' ? healthColorScale(d.healthScore) : color[d.type]; }
function getNodeStroke(d) { return document.getElementById('color-mode').value === 'health' ? healthStrokeScale(d.healthScore) : colorDark[d.type]; }

const links = raw.edges.map(e => ({
  source: nodeIdx[e.from],
  target: nodeIdx[e.to],
  type: e.type
}));

const outgoing = {}, incoming = {};
raw.edges.forEach(e => {
  if (!outgoing[e.from]) outgoing[e.from] = [];
  outgoing[e.from].push({ id: e.to, type: e.type });
  if (!incoming[e.to]) incoming[e.to] = [];
  incoming[e.to].push({ id: e.from, type: e.type });
});

const svg = d3.select('svg').attr('width', W).attr('height', H);

// Arrowhead markers (5 edge types × dim/bright)
const defs = svg.append('defs');
const edgeTypes = [
  { type: 'uses_service', color: '#79c0ff' },
  { type: 'router_uses_service', color: '#d2a8ff' },
  { type: 'injects_model', color: '#ffa657' },
  { type: 'injects_client', color: '#f778ba' },
  { type: 'injects_service', color: '#7ee787' },
];
edgeTypes.forEach(({ type, color: c }) => {
  [{ suffix: '', opacity: 0.15, w: 8, h: 6 }, { suffix: 'hi-', opacity: 0.9, w: 5, h: 3.75 }].forEach(({ suffix, opacity, w, h }) => {
    defs.append('marker')
      .attr('id', 'arrow-' + suffix + type)
      .attr('viewBox', '0 0 10 6')
      .attr('refX', 10).attr('refY', 3)
      .attr('markerWidth', w).attr('markerHeight', h)
      .attr('orient', 'auto')
      .append('path')
      .attr('d', 'M0,0 L10,3 L0,6Z')
      .attr('fill', c)
      .attr('fill-opacity', opacity);
  });
});

const g = svg.append('g');
const zoomBehavior = d3.zoom().scaleExtent([0.05, 10]).on('zoom', e => g.attr('transform', e.transform));
svg.call(zoomBehavior);

const colX = { controller: W * 0.08, router: W * 0.20, service: W * 0.40, model: W * 0.68, client: W * 0.88 };

let domainNames = [];
let domainColor = {};
let domainCenters = {};
const typeOffsetX = { controller: -50, router: -25, service: 0, model: 25, client: 50 };

const domainMap = {};
nodes.forEach(n => {
  if (n.domain) {
    if (!domainMap[n.domain]) domainMap[n.domain] = [];
    domainMap[n.domain].push(n);
  }
});
domainNames = Object.keys(domainMap).sort();
const dCols = Math.ceil(Math.sqrt(domainNames.length * (W / H)));
const dRows = Math.ceil(domainNames.length / dCols);
const cellW = W / (dCols + 1);
const cellH = (H - 60) / (dRows + 1);
const palette = d3.schemeTableau10;

domainNames.forEach((name, i) => {
  const col = i % dCols;
  const row = Math.floor(i / dCols);
  const cx = cellW * (col + 1);
  const cy = cellH * (row + 1) + 40;
  domainCenters[name] = { x: cx, y: cy };
  domainColor[name] = palette[i % palette.length];
  domainMap[name].forEach(n => {
    n.domainX = cx + (typeOffsetX[n.type] || 0);
    n.domainY = cy;
  });
});

let domainsEnabled = true;

const sim = d3.forceSimulation(nodes)
  .force('link', d3.forceLink(links).distance(60).strength(0.1))
  .force('charge', d3.forceManyBody().strength(-150).distanceMax(300))
  .force('collision', d3.forceCollide().radius(d => d.r + 18).strength(0.9).iterations(2))
  .force('x', d3.forceX(d => d.domainX || W/2).strength(0.3))
  .force('y', d3.forceY(d => d.domainY || H/2).strength(0.3));

const colLabels = g.append('g').attr('class', 'col-labels').style('display', 'none');
['Controllers', 'Routers', 'Services', 'Models', 'Clients'].forEach((label, i) => {
  const types = ['controller', 'router', 'service', 'model', 'client'];
  colLabels.append('text')
    .attr('x', colX[types[i]])
    .attr('y', 30)
    .attr('text-anchor', 'middle')
    .attr('fill', color[types[i]])
    .attr('font-size', '13px')
    .attr('font-weight', '600')
    .attr('opacity', 0.4)
    .text(label);
});

function applyDomainLayout() {
  if (domainsEnabled) {
    sim.force('link', d3.forceLink(links).distance(60).strength(0.1))
      .force('charge', d3.forceManyBody().strength(-150).distanceMax(300))
      .force('collision', d3.forceCollide().radius(d => d.r + 18).strength(0.9).iterations(2))
      .force('center', null)
      .force('x', d3.forceX(d => d.domainX || W/2).strength(0.3))
      .force('y', d3.forceY(d => d.domainY || H/2).strength(0.3));
    colLabels.style('display', 'none');
  } else {
    sim.force('link', d3.forceLink(links).distance(100).strength(0.15))
      .force('charge', d3.forceManyBody().strength(-350).distanceMax(600))
      .force('center', d3.forceCenter(W / 2, H / 2).strength(0.01))
      .force('collision', d3.forceCollide().radius(d => d.r + 25).strength(0.9).iterations(2))
      .force('x', d3.forceX(d => colX[d.type] || W/2).strength(0.2))
      .force('y', d3.forceY(H / 2).strength(0.05));
    colLabels.style('display', null);
    hullLayer.selectAll('*').remove();
  }
  sim.alpha(0.8).restart();
}

const hullLayer = g.insert('g', ':first-child').attr('class', 'hull-layer');

const link = g.append('g').selectAll('line').data(links).join('line')
  .attr('class', d => 'link link-' + d.type)
  .attr('marker-end', d => 'url(#arrow-' + d.type + ')');

let dragged = false;
const node = g.append('g').selectAll('g').data(nodes).join('g')
  .attr('class', 'node')
  .call(d3.drag()
    .on('start', (e, d) => { dragged = false; d.fx = d.x; d.fy = d.y; })
    .on('drag', (e, d) => { dragged = true; if (!e.active) sim.alphaTarget(0.3).restart(); d.fx = e.x; d.fy = e.y; })
    .on('end', (e, d) => { if (!e.active) sim.alphaTarget(0); if (!dragged) { d.fx = null; d.fy = null; } }));

node.append('circle')
  .attr('r', d => d.r)
  .attr('fill', d => getNodeColor(d))
  .attr('stroke', d => getNodeStroke(d))
  .attr('stroke-width', 1.5)
  .attr('stroke-dasharray', d => d.ee ? '3,2' : null);

node.append('text')
  .text(d => d.id)
  .attr('dx', d => d.r + 3)
  .attr('dy', 3)
  .attr('fill', d => color[d.type])
  .attr('font-size', d => d.r > 8 ? '10px' : '8px')
  .attr('opacity', 0.7);

const tip = d3.select('#tooltip');

node.on('mouseover', (ev, d) => {
  const out = outgoing[d.id] || [];
  const inc = incoming[d.id] || [];
  let h = '<h3 style="color:' + color[d.type] + '">' + d.id + '</h3>';
  h += '<span style="color:#8b949e">' + d.type + '</span>';
  if (d.domain) h += ' <span style="color:#6e7681">· ' + d.domain + '</span>';
  const pct = Math.round((1 - d.healthScore) * 100);
  h += '<div class="t-section">health score</div>';
  h += '<div class="t-item"><span style="color:' + healthColorScale(d.healthScore) + ';font-weight:700;font-size:18px">' + pct + '</span><span style="color:#484f58;font-size:12px"> / 100</span></div>';
  h += '<div class="t-item" style="font-size:11px;color:#8b949e;margin-top:2px">';
  h += (connCount[d.id]||0) + ' edges · ' + (d.lineCount||0) + ' lines · ' + (d.gitActivity?.churn||0) + ' churn · ' + (d.gitActivity?.commits||0) + ' commits';
  h += '</div>';
  if (d.healthSummary) {
    h += '<div style="color:' + healthColorScale(d.healthScore) + ';font-style:italic;padding-left:10px;margin-top:4px;font-size:11px">' + d.healthSummary + '</div>';
  }
  if (d.gitActivity) {
    h += '<div class="t-section">git activity</div>';
    h += '<div class="t-item">' + d.gitActivity.commits + ' commits · ' + d.gitActivity.authors + ' authors · ' + d.gitActivity.churn + ' recent (6mo)</div>';
    if (d.gitSummary) {
      h += '<div style="color:#7ee787;font-style:italic;padding-left:10px;margin-top:4px;font-size:11px;white-space:pre-line">' + d.gitSummary + '</div>';
    } else if (d.gitActivity.recentCommits && d.gitActivity.recentCommits.length > 0) {
      h += '<div class="t-section" style="margin-top:6px">recent commits</div>';
      d.gitActivity.recentCommits.forEach(c => {
        const msg = c.message.length > 50 ? c.message.slice(0, 50) + '…' : c.message;
        h += '<div class="t-item" style="font-size:11px"><span style="color:#484f58">' + c.hash + '</span>  ' + msg + '  <span style="color:#484f58">' + c.relativeDate + '</span></div>';
      });
    }
  }
  if (out.length) {
    const byType = {};
    out.forEach(o => { if (!byType[o.type]) byType[o.type] = []; byType[o.type].push(o.id); });
    for (const [t, ids] of Object.entries(byType)) {
      const label = t.replace('injects_','').replace(/^(router_)?uses_/,'uses ');
      h += '<div class="t-section">' + label + 's (' + ids.length + ')</div>';
      ids.sort().forEach(id => { h += '<div class="t-item">' + id + '</div>'; });
    }
  }
  if (inc.length) {
    h += '<div class="t-section">used by (' + inc.length + ')</div>';
    inc.sort((a,b) => a.id.localeCompare(b.id)).forEach(i => {
      h += '<div class="t-item">' + i.id + ' <span style="color:#484f58">(' + i.type.replace('injects_','').replace(/^(router_)?uses_/,'') + ')</span></div>';
    });
  }
  tip.html(h).style('display', 'block');
})
.on('mousemove', ev => {
  const x = Math.min(ev.clientX + 16, W - 400);
  tip.style('left', x + 'px').style('top', (ev.clientY - 10) + 'px');
})
.on('mouseout', () => tip.style('display', 'none'));

let selected = null;
node.on('click', (ev, d) => {
  ev.stopPropagation();
  if (selected === d.id) { selected = null; clearHL(); return; }
  selected = d.id;
  highlightNode(d);
});
svg.on('click', () => { selected = null; clearHL(); });

document.getElementById('depth').addEventListener('input', () => {
  if (selected) {
    const d = nodes.find(n => n.id === selected);
    if (d) highlightNode(d);
  }
});

document.getElementById('size-mode').addEventListener('change', () => {
  nodes.forEach(n => { n.r = calcRadius(n); });
  node.select('circle').attr('r', d => d.r);
  node.select('text').attr('dx', d => d.r + 3).attr('font-size', d => d.r > 8 ? '10px' : '8px');
  sim.force('collision', d3.forceCollide().radius(d => d.r + (domainsEnabled ? 18 : 25)).strength(0.9).iterations(2));
  sim.alpha(0.3).restart();
});

document.getElementById('color-mode').addEventListener('change', () => {
  const isHealth = document.getElementById('color-mode').value === 'health';
  node.select('circle')
    .transition().duration(400)
    .attr('fill', d => getNodeColor(d))
    .attr('stroke', d => getNodeStroke(d));
  document.getElementById('heatmap-legend').style.display = isHealth ? 'flex' : 'none';
});

function getConnected(id, depth) {
  const downMap = new Map([[id, 0]]);
  let downFrontier = new Set([id]);
  for (let d = 0; d < depth; d++) {
    const next = new Set();
    links.forEach(l => {
      const src = typeof l.source === 'object' ? l.source.id : nodes[l.source].id;
      const tgt = typeof l.target === 'object' ? l.target.id : nodes[l.target].id;
      if (downFrontier.has(src) && !downMap.has(tgt)) { downMap.set(tgt, d + 1); next.add(tgt); }
    });
    if (next.size === 0) break;
    downFrontier = next;
  }

  const upMap = new Map([[id, 0]]);
  let upFrontier = new Set([id]);
  for (let d = 0; d < depth; d++) {
    const next = new Set();
    links.forEach(l => {
      const src = typeof l.source === 'object' ? l.source.id : nodes[l.source].id;
      const tgt = typeof l.target === 'object' ? l.target.id : nodes[l.target].id;
      if (upFrontier.has(tgt) && !upMap.has(src)) { upMap.set(src, d + 1); next.add(src); }
    });
    if (next.size === 0) break;
    upFrontier = next;
  }

  const merged = new Map(downMap);
  upMap.forEach((dep, nid) => {
    if (!merged.has(nid) || dep < merged.get(nid)) merged.set(nid, dep);
  });
  return merged;
}

function getDepth() {
  return Math.max(1, parseInt(document.getElementById('depth').value) || 1);
}

function highlightNode(d) {
  link.interrupt();
  const depth = getDepth();
  const conn = getConnected(d.id, depth);
  node.classed('dimmed', n => !conn.has(n.id));
  link.classed('dimmed', l => {
    const s = typeof l.source === 'object' ? l.source.id : nodes[l.source].id;
    const t = typeof l.target === 'object' ? l.target.id : nodes[l.target].id;
    return !(conn.has(s) && conn.has(t));
  });
  link.classed('highlighted', l => {
    const s = typeof l.source === 'object' ? l.source.id : nodes[l.source].id;
    const t = typeof l.target === 'object' ? l.target.id : nodes[l.target].id;
    return conn.has(s) && conn.has(t);
  });
  updateMarkers();

  const edgesBySource = {};
  link.filter('.highlighted').each(function(l) {
    const src = typeof l.source === 'object' ? l.source.id : nodes[l.source].id;
    const tgt = typeof l.target === 'object' ? l.target.id : nodes[l.target].id;
    const srcDepth = conn.get(src) ?? Infinity;
    const tgtDepth = conn.get(tgt) ?? Infinity;
    const outward = srcDepth <= tgtDepth;
    const origin = outward ? src : tgt;
    if (!edgesBySource[origin]) edgesBySource[origin] = [];
    edgesBySource[origin].push({ el: d3.select(this), l, outward });
    d3.select(this).style('stroke-opacity', 0).attr('marker-end', null);
  });

  const animated = new Set();
  function animateFrom(nodeId) {
    const edges = edgesBySource[nodeId];
    if (!edges) return;
    edges.forEach(e => {
      const el = e.el;
      if (animated.has(el.node())) return;
      animated.add(el.node());
      const x1 = +el.attr('x1'), y1 = +el.attr('y1');
      const x2 = +el.attr('x2'), y2 = +el.attr('y2');
      const len = Math.hypot(x2 - x1, y2 - y1);
      if (len === 0) return;
      const src = typeof e.l.source === 'object' ? e.l.source.id : nodes[e.l.source].id;
      const tgt = typeof e.l.target === 'object' ? e.l.target.id : nodes[e.l.target].id;
      const destId = e.outward ? tgt : src;
      el.style('stroke-opacity', null)
        .attr('stroke-dasharray', len)
        .attr('stroke-dashoffset', e.outward ? len : -len);
      el.transition()
        .duration(400 + Math.random() * 200)
        .ease(d3.easeCubicOut)
        .attr('stroke-dashoffset', 0)
        .on('end', function() {
          const self = d3.select(this);
          if (e.l.type === 'injects_service') self.attr('stroke-dasharray', '4,3');
          else self.attr('stroke-dasharray', null);
          self.attr('stroke-dashoffset', null);
          if (arrowsEnabled) self.attr('marker-end', 'url(#arrow-hi-' + e.l.type + ')');
          animateFrom(destId);
        });
    });
  }
  animateFrom(d.id);
}

function clearHL() {
  link.interrupt();
  node.classed('dimmed', false);
  link.classed('dimmed', false).classed('highlighted', false);
  link.each(function(l) {
    const el = d3.select(this);
    el.style('stroke-opacity', null);
    if (l.type === 'injects_service') el.attr('stroke-dasharray', '4,3');
    else el.attr('stroke-dasharray', null);
    el.attr('stroke-dashoffset', null);
  });
  updateMarkers();
}

let arrowsEnabled = true;
function updateMarkers() {
  link.attr('marker-end', function(l) {
    if (!arrowsEnabled) return null;
    if (d3.select(this).classed('dimmed')) return null;
    const isHL = d3.select(this).classed('highlighted');
    return 'url(#arrow-' + (isHL ? 'hi-' : '') + l.type + ')';
  });
}

document.getElementById('btn-arrows').addEventListener('click', () => {
  arrowsEnabled = !arrowsEnabled;
  document.getElementById('btn-arrows').classList.toggle('active', arrowsEnabled);
  updateMarkers();
});

document.getElementById('btn-domains').addEventListener('click', () => {
  domainsEnabled = !domainsEnabled;
  document.getElementById('btn-domains').classList.toggle('active', domainsEnabled);
  applyDomainLayout();
});

document.getElementById('search').addEventListener('input', e => {
  const q = e.target.value.toLowerCase();
  if (!q) { clearHL(); return; }
  const matches = new Set();
  nodes.forEach(n => { if (n.id.toLowerCase().includes(q)) matches.add(n.id); });
  const conn = new Set(matches);
  links.forEach(l => {
    const s = typeof l.source === 'object' ? l.source.id : nodes[l.source].id;
    const t = typeof l.target === 'object' ? l.target.id : nodes[l.target].id;
    if (matches.has(s) || matches.has(t)) { conn.add(s); conn.add(t); }
  });
  node.classed('dimmed', n => !conn.has(n.id));
  link.classed('dimmed', l => {
    const s = typeof l.source === 'object' ? l.source.id : nodes[l.source].id;
    const t = typeof l.target === 'object' ? l.target.id : nodes[l.target].id;
    return !(matches.has(s) || matches.has(t));
  });
  link.classed('highlighted', l => {
    const s = typeof l.source === 'object' ? l.source.id : nodes[l.source].id;
    const t = typeof l.target === 'object' ? l.target.id : nodes[l.target].id;
    return matches.has(s) || matches.has(t);
  });
  updateMarkers();
});

document.querySelectorAll('[data-filter]').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('[data-filter]').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const type = btn.dataset.filter;
    if (type === 'all') { clearHL(); return; }
    const matches = new Set();
    nodes.forEach(n => { if (n.type === type) matches.add(n.id); });
    const conn = new Set(matches);
    links.forEach(l => {
      const s = typeof l.source === 'object' ? l.source.id : nodes[l.source].id;
      const t = typeof l.target === 'object' ? l.target.id : nodes[l.target].id;
      if (matches.has(s) || matches.has(t)) { conn.add(s); conn.add(t); }
    });
    node.classed('dimmed', n => !conn.has(n.id));
    link.classed('dimmed', l => {
      const s = typeof l.source === 'object' ? l.source.id : nodes[l.source].id;
      const t = typeof l.target === 'object' ? l.target.id : nodes[l.target].id;
      return !(matches.has(s) || matches.has(t));
    });
    updateMarkers();
  });
});

document.getElementById('btn-reset').addEventListener('click', () => {
  selected = null; clearHL();
  document.getElementById('search').value = '';
  document.querySelectorAll('[data-filter]').forEach(b => b.classList.remove('active'));
  document.querySelector('[data-filter="all"]').classList.add('active');
  document.getElementById('color-mode').value = 'type';
  node.select('circle').attr('fill', d => getNodeColor(d)).attr('stroke', d => getNodeStroke(d));
  document.getElementById('heatmap-legend').style.display = 'none';
  svg.transition().duration(500).call(zoomBehavior.transform, d3.zoomIdentity);
});

// EE toggle
const hasEe = nodes.some(n => n.ee);
if (hasEe) {
  document.getElementById('btn-ee').style.display = '';
  document.getElementById('sep-ee').style.display = '';
  let eeVisible = true;
  const eeBtn = document.getElementById('btn-ee');
  eeBtn.classList.add('active');
  function applyEeVisibility() {
    node.each(function(d) {
      if (d.ee) {
        d3.select(this).style('display', eeVisible ? null : 'none');
      }
    });
    link.each(function(l) {
      const s = typeof l.source === 'object' ? l.source.id : nodes[l.source].id;
      const t = typeof l.target === 'object' ? l.target.id : nodes[l.target].id;
      const sNode = nodes.find(n => n.id === s);
      const tNode = nodes.find(n => n.id === t);
      if ((sNode && sNode.ee) || (tNode && tNode.ee)) {
        d3.select(this).style('display', eeVisible ? null : 'none');
      }
    });
  }
  applyEeVisibility();
  eeBtn.addEventListener('click', () => {
    eeVisible = !eeVisible;
    eeBtn.classList.toggle('active', eeVisible);
    applyEeVisibility();
  });
}

function padHull(points, pad) {
  if (points.length < 3) return points;
  const cx = d3.mean(points, p => p[0]);
  const cy = d3.mean(points, p => p[1]);
  return points.map(p => {
    const dx = p[0] - cx, dy = p[1] - cy;
    const len = Math.sqrt(dx * dx + dy * dy) || 1;
    return [p[0] + dx / len * pad, p[1] + dy / len * pad];
  });
}

function smoothHull(points) {
  if (points.length < 3) return '';
  const n = points.length;
  let d = 'M' + points[0].join(',');
  for (let i = 0; i < n; i++) {
    const p0 = points[i];
    const p1 = points[(i + 1) % n];
    const p2 = points[(i + 2) % n];
    const mx1 = (p0[0] + p1[0]) / 2, my1 = (p0[1] + p1[1]) / 2;
    const mx2 = (p1[0] + p2[0]) / 2, my2 = (p1[1] + p2[1]) / 2;
    if (i === 0) d = 'M' + mx1 + ',' + my1;
    d += ' Q' + p1[0] + ',' + p1[1] + ' ' + mx2 + ',' + my2;
  }
  return d + 'Z';
}

sim.on('tick', () => {
  link.each(function(d) {
    const dx = d.target.x - d.source.x;
    const dy = d.target.y - d.source.y;
    const len = Math.sqrt(dx * dx + dy * dy) || 1;
    const r = d.target.r || 6;
    const el = d3.select(this);
    el.attr('x1', d.source.x).attr('y1', d.source.y)
      .attr('x2', d.target.x - dx / len * r)
      .attr('y2', d.target.y - dy / len * r);
  });
  node.attr('transform', d => `translate(${d.x},${d.y})`);

  if (domainsEnabled) {
    hullLayer.selectAll('*').remove();
    domainNames.forEach(name => {
      const pts = nodes.filter(n => n.domain === name).map(n => [n.x, n.y]);
      if (pts.length < 2) return;
      if (pts.length === 2) {
        const [a, b] = pts;
        const dx = b[0] - a[0], dy = b[1] - a[1];
        const len = Math.sqrt(dx * dx + dy * dy) || 1;
        const nx = -dy / len * 25, ny = dx / len * 25;
        const expanded = [[a[0]+nx,a[1]+ny],[b[0]+nx,b[1]+ny],[b[0]-nx,b[1]-ny],[a[0]-nx,a[1]-ny]];
        hullLayer.append('path')
          .attr('class', 'domain-hull')
          .attr('d', 'M' + expanded.map(p => p.join(',')).join('L') + 'Z')
          .attr('fill', domainColor[name]).attr('fill-opacity', 0.04)
          .attr('stroke', domainColor[name]).attr('stroke-opacity', 0.15)
          .attr('stroke-width', 1);
      } else {
        const hull = d3.polygonHull(pts);
        if (hull) {
          const padded = padHull(hull, 25);
          hullLayer.append('path')
            .attr('class', 'domain-hull')
            .attr('d', smoothHull(padded))
            .attr('fill', domainColor[name]).attr('fill-opacity', 0.04)
            .attr('stroke', domainColor[name]).attr('stroke-opacity', 0.15)
            .attr('stroke-width', 1);
        }
      }
      const cx = d3.mean(pts, p => p[0]);
      const cy = d3.mean(pts, p => p[1]);
      const minY = d3.min(pts, p => p[1]);
      hullLayer.append('text')
        .attr('class', 'domain-label')
        .attr('x', cx).attr('y', minY - 18)
        .attr('fill', domainColor[name]).attr('fill-opacity', 0.6)
        .text(name);
    });
  }
});
</script>
</body>
</html>